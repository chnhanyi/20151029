// avalon , avalon primise , avalone mmrequest , avalon animate
(function(b,c){if(typeof module==="object"&&typeof module.exports==="object"){module.exports=b.document?c(b,true):function(d){if(!d.document){throw new Error("Avalon requires a window with a document")}return c(d)}}else{c(b)}}(typeof window!=="undefined"?window:this,function(aQ,a6){var cf=new Date()-0;var cz=aQ.document;var b=cz.getElementsByTagName("head")[0];var aG=b.insertBefore(document.createElement("avalon"),b.firstChild);aG.innerHTML="X<style id='avalonStyle'>.avalonHide{ display: none!important }</style>";aG.setAttribute("ms-skip","1");aG.className="avalonHide";var aw=/\[native code\]/;function ct(){if(aQ.console&&avalon.config.debug){Function.apply.call(console.log,console,arguments)}}var cE="$"+cf;var ax=aQ.require;var cx=aQ.define;var r;var c0=false;var bU=/[^, ]+/g;var c5=/^(?:object|array)$/;var aA=/^\[object SVG\w*Element\]$/;var E=/^\[object (?:Window|DOMWindow|global)\]$/;var bz=Object.prototype;var aN=bz.hasOwnProperty;var ao=bz.toString;var cJ=Array.prototype;var cL=cJ.slice;var a1={};var aW=aQ.dispatchEvent;var cT=cz.documentElement;var cn=cz.createDocumentFragment();var c1=cz.createElement("div");var ce={};"Boolean Number String Function Array Date RegExp Object Error".replace(bU,function(e){ce["[object "+e+"]"]=e.toLowerCase()});function o(){}function c3(df,dd){if(typeof df==="string"){df=df.match(bU)||[]}var dc={},ap=dd!==void 0?dd:1;for(var e=0,de=df.length;e<de;e++){dc[df[e]]=ap}return dc}var bF=function(e){e=e||"avalon";return(e+Math.random()+Math.random()).replace(/0\./g,"")};function cV(){if(aQ.VBArray){var e=document.documentMode;return e?e:aQ.XMLHttpRequest?7:6}else{return 0}}var aY=cV();avalon=function(e){return new avalon.init(e)};avalon.nextTick=new function(){var dc=aQ.setImmediate;var ap=aQ.MutationObserver;var de=aW&&aQ.postMessage;if(dc){return dc.bind(aQ)}var e=[];function df(){var dh=e.length;for(var dg=0;dg<dh;dg++){e[dg]()}e=e.slice(dh)}if(ap){var dd=document.createTextNode("avalon");new ap(df).observe(dd,{characterData:true});return function(dg){e.push(dg);dd.data=Math.random()}}if(de){aQ.addEventListener("message",function(dh){var dg=dh.source;if((dg===aQ||dg===null)&&dh.data==="process-tick"){dh.stopPropagation();df()}});return function(dg){e.push(dg);aQ.postMessage("process-tick","*")}}return function(dg){setTimeout(dg,0)}};avalon.init=function(e){this[0]=this.element=e};avalon.fn=avalon.prototype=avalon.init.prototype;avalon.type=function(e){if(e==null){return String(e)}return typeof e==="object"||typeof e==="function"?ce[ao.call(e)]||"object":typeof e};var C=typeof alert==="object"?function(ap){try{return/^\s*\bfunction\b/.test(ap+"")}catch(dc){return false}}:function(e){return ao.call(e)==="[object Function]"};avalon.isFunction=C;avalon.isWindow=function(e){if(!e){return false}return e==e.document&&e.document!=e};function bO(e){return E.test(ao.call(e))}if(bO(aQ)){avalon.isWindow=bO}var aK;for(aK in avalon({})){break}var db=aK!=="0";avalon.isPlainObject=function(dd,ap){if(!dd||avalon.type(dd)!=="object"||dd.nodeType||avalon.isWindow(dd)){return false}try{if(dd.constructor&&!aN.call(dd,"constructor")&&!aN.call(dd.constructor.prototype,"isPrototypeOf")){return false}}catch(dc){return false}if(db){for(ap in dd){return aN.call(dd,ap)}}for(ap in dd){}return ap===void 0||aN.call(dd,ap)};if(aw.test(Object.getPrototypeOf)){avalon.isPlainObject=function(e){return ao.call(e)==="[object Object]"&&Object.getPrototypeOf(e)===bz}}avalon.mix=avalon.fn.mix=function(){var dk,dc,ap,dd,di,dj,de=arguments[0]||{},df=1,dg=arguments.length,dl=false;if(typeof de==="boolean"){dl=de;de=arguments[1]||{};df++}if(typeof de!=="object"&&!C(de)){de={}}if(df===dg){de=this;df--}for(;df<dg;df++){if((dk=arguments[df])!=null){for(dc in dk){ap=de[dc];try{dd=dk[dc]}catch(dh){continue}if(de===dd){continue}if(dl&&dd&&(avalon.isPlainObject(dd)||(di=Array.isArray(dd)))){if(di){di=false;dj=ap&&Array.isArray(ap)?ap:[]}else{dj=ap&&avalon.isPlainObject(ap)?ap:{}}de[dc]=avalon.mix(dl,dj,dd)}else{if(dd!==void 0){de[dc]=dd}}}}}return de};function bh(ap,e){ap=Math.floor(ap)||0;return ap<0?Math.max(e+ap,0):Math.min(ap,e)}avalon.mix({rword:bU,subscribers:cE,version:1.41,ui:{},log:ct,slice:aW?function(ap,dc,e){return cL.call(ap,dc,e)}:function(dc,df,ap){var dd=[];var e=dc.length;if(ap===void 0){ap=e}if(typeof ap==="number"&&isFinite(ap)){df=bh(df,e);ap=bh(ap,e);for(var de=df;de<ap;++de){dd[de-df]=dc[de]}}return dd},noop:o,error:function(dc,ap){throw (ap||Error)(dc)},oneObject:c3,range:function(df,ap,dd){dd||(dd=1);if(ap==null){ap=df||0;df=0}var dc=-1,e=Math.max(0,Math.ceil((ap-df)/dd)),de=new Array(e);while(++dc<e){de[dc]=df;df+=dd}return de},eventHooks:{},bind:function(de,dd,dc,ap){var e=avalon.eventHooks;var df=e[dd];if(typeof df==="object"){dd=df.type;if(df.deel){dc=df.deel(de,dd,dc,ap)}}var dg=aW?dc:function(dh){dc.call(de,aB(dh))};if(aW){de.addEventListener(dd,dg,!!ap)}else{de.attachEvent("on"+dd,dg)}return dg},unbind:function(de,dd,dc,ap){var e=avalon.eventHooks;var df=e[dd];var dg=dc||o;if(typeof df==="object"){dd=df.type;if(df.deel){dc=df.deel(de,dd,dc,false)}}if(aW){de.removeEventListener(dd,dg,!!ap)}else{de.detachEvent("on"+dd,dg)}},css:function(dc,e,dd){if(dc instanceof avalon){dc=dc[0]}var df=/[_-]/.test(e)?j(e):e,ap;e=avalon.cssName(df)||df;if(dd===void 0||typeof dd==="boolean"){ap=c9[df+":get"]||c9["@:get"];if(e==="background"){e="backgroundColor"}var de=ap(dc,e);return dd===true?parseFloat(de)||0:de}else{if(dd===""){dc.style[e]=""}else{if(dd==null||dd!==dd){return}if(isFinite(dd)&&!avalon.cssNumber[df]){dd+="px"}ap=c9[df+":set"]||c9["@:set"];ap(dc,e,dd)}}},each:function(dc,ap){if(dc){var e=0;if(bY(dc)){for(var dd=dc.length;e<dd;e++){if(ap(e,dc[e])===false){break}}}else{for(e in dc){if(dc.hasOwnProperty(e)&&ap(e,dc[e])===false){break}}}}},getWidgetData:function(dd,e){var ap=avalon(dd).data();var de={};for(var dc in ap){if(dc.indexOf(e)===0){de[dc.replace(e,"").replace(/\w/,function(df){return df.toLowerCase()})]=ap[dc]}}return de},Array:{ensure:function(ap,e){if(ap.indexOf(e)===-1){return ap.push(e)}},removeAt:function(ap,e){return !!ap.splice(e,1).length},remove:function(dc,ap){var e=dc.indexOf(ap);if(~e){return avalon.Array.removeAt(dc,e)}return false}}});var c2=avalon.bindingHandlers={};var aq=avalon.bindingExecutors={};function bY(dd){if(!dd){return false}var de=dd.length;if(de===(de>>>0)){var ap=ao.call(dd).slice(8,-1);if(/(?:regexp|string|function|window|global)$/i.test(ap)){return false}if(ap==="Array"){return true}try{if({}.propertyIsEnumerable.call(dd,"length")===false){return/^\s?function/.test(dd.item||dd.callee)}return true}catch(dc){return !dd.window}}return false}var l=new function(){function e(dc){this.size=0;this.limit=dc;this.head=this.tail=void 0;this._keymap={}}var ap=e.prototype;ap.put=function(dc,de){var dd={key:dc,value:de};this._keymap[dc]=dd;if(this.tail){this.tail.newer=dd;dd.older=this.tail}else{this.head=dd}this.tail=dd;if(this.size===this.limit){this.shift()}else{this.size++}return de};ap.shift=function(){var dc=this.head;if(dc){this.head=this.head.newer;this.head.older=dc.newer=dc.older=this._keymap[dc.key]=void 0}};ap.get=function(dc){var dd=this._keymap[dc];if(dd===void 0){return}if(dd===this.tail){return dd.value}if(dd.newer){if(dd===this.head){this.head=dd.newer}dd.newer.older=dd.older}if(dd.older){dd.older.newer=dd.newer}dd.newer=void 0;dd.older=this.tail;if(this.tail){this.tail.newer=dd}this.tail=dd;return dd.value};return e};if(!"司徒正美".trim){var N=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;String.prototype.trim=function(){return this.replace(N,"")}}var v=!({toString:null}).propertyIsEnumerable("toString"),bm=(function(){}).propertyIsEnumerable("prototype"),A=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],aD=A.length;if(!Object.keys){Object.keys=function(de){var ap=[];var di=bm&&typeof de==="function";if(typeof de==="string"||(de&&de.callee)){for(var dg=0;dg<de.length;++dg){ap.push(String(dg))}}else{for(var e in de){if(!(di&&e==="prototype")&&aN.call(de,e)){ap.push(String(e))}}}if(v){var dh=de.constructor,df=dh&&dh.prototype===de;for(var dd=0;dd<aD;dd++){var dc=A[dd];if(!(df&&dc==="constructor")&&aN.call(de,dc)){ap.push(dc)}}}return ap}}if(!Array.isArray){Array.isArray=function(e){return ao.call(e)==="[object Array]"}}if(!o.bind){Function.prototype.bind=function(dc){if(arguments.length<2&&dc===void 0){return this}var ap=this,e=arguments;return function(){var dd=[],de;for(de=1;de<e.length;de++){dd.push(e[de])}for(de=0;de<arguments.length;de++){dd.push(arguments[de])}return ap.apply(dc,dd)}}}function bt(dd,e,dc){var ap="for(var "+dd+"i=0,n = this.length; i < n; i++){"+e.replace("_","((i in this) && fn.call(scope,this[i],i,this))")+"}"+dc;return Function("fn,scope",ap)}if(!aw.test([].map)){avalon.mix(cJ,{indexOf:function(dc,e){var dd=this.length,ap=~~e;if(ap<0){ap+=dd}for(;ap<dd;ap++){if(this[ap]===dc){return ap}}return -1},lastIndexOf:function(dc,e){var dd=this.length,ap=e==null?dd-1:e;if(ap<0){ap=Math.max(0,dd+ap)}for(;ap>=0;ap--){if(this[ap]===dc){return ap}}return -1},forEach:bt("","_",""),filter:bt("r=[],j=0,","if(_)r[j++]=this[i]","return r"),map:bt("r=[],","r[i]=_","return r"),some:bt("","if(_)return true","return false"),every:bt("","if(!_)return false","return true")})}function d(ap,dc){try{while((dc=dc.parentNode)){if(dc===ap){return true}}return false}catch(dd){return false}}avalon.contains=d;if(!cz.contains){cz.contains=function(e){return d(cz,e)}}function q(){return new XMLSerializer().serializeToString(this)}if(aQ.SVGElement){if(!cz.createTextNode("x").contains){Node.prototype.contains=function(e){return !!(this.compareDocumentPosition(e)&16)}}var bi="http://www.w3.org/2000/svg";var bR=cz.createElementNS(bi,"svg");bR.innerHTML='<circle cx="50" cy="50" r="40" fill="red" />';if(!aA.test(bR.firstChild)){function b2(de,df){if(de&&de.childNodes){var ap=de.childNodes;for(var dc=0,dd;dd=ap[dc++];){if(dd.tagName){var e=cz.createElementNS(bi,dd.tagName.toLowerCase());cJ.forEach.call(dd.attributes,function(dg){e.setAttribute(dg.name,dg.value)});b2(dd,e);df.appendChild(e)}}}}Object.defineProperties(SVGElement.prototype,{outerHTML:{enumerable:true,configurable:true,get:q,set:function(ap){var e=this.tagName.toLowerCase(),dc=this.parentNode,de=avalon.parseHTML(ap);if(e==="svg"){dc.insertBefore(de,this)}else{var dd=cz.createDocumentFragment();b2(de,dd);dc.insertBefore(dd,this)}dc.removeChild(this)}},innerHTML:{enumerable:true,configurable:true,get:function(){var dc=this.outerHTML;var ap=new RegExp("<"+this.nodeName+'\\b(?:(["\'])[^"]*?(\\1)|[^>])*>',"i");var e=new RegExp("</"+this.nodeName+">$","i");return dc.replace(ap,"").replace(e,"")},set:function(e){if(avalon.clearHTML){avalon.clearHTML(this);var ap=avalon.parseHTML(e);b2(ap,this)}}}})}}if(!cT.outerHTML&&aQ.HTMLElement){HTMLElement.prototype.__defineGetter__("outerHTML",q)}var W=/^(?:mouse|contextmenu|drag)|click/;function aB(dd){var e={};for(var ap in dd){e[ap]=dd[ap]}var df=e.target=dd.srcElement;if(dd.type.indexOf("key")===0){e.which=dd.charCode!=null?dd.charCode:dd.keyCode}else{if(W.test(dd.type)){var de=df.ownerDocument||cz;var dc=de.compatMode==="BackCompat"?de.body:de.documentElement;e.pageX=dd.clientX+(dc.scrollLeft>>0)-(dc.clientLeft>>0);e.pageY=dd.clientY+(dc.scrollTop>>0)-(dc.clientTop>>0);e.wheelDeltaY=e.wheelDelta;e.wheelDeltaX=0}}e.timeStamp=new Date()-0;e.originalEvent=dd;e.preventDefault=function(){dd.returnValue=false};e.stopPropagation=function(){dd.cancelBubble=true};return e}var br=avalon.eventHooks;if(!("onmouseenter" in cT)){avalon.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(ap,e){br[ap]={type:e,deel:function(de,dc,dd){return function(dg){var df=dg.relatedTarget;if(!df||(df!==de&&!(de.compareDocumentPosition(df)&16))){delete dg.type;dg.type=ap;return dd.call(de,dg)}}}}})}avalon.each({AnimationEvent:"animationend",WebKitAnimationEvent:"webkitAnimationEnd"},function(ap,e){if(aQ[ap]&&!br.animationend){br.animationend={type:e}}});if(!("oninput" in cz.createElement("input"))){br.input={type:"propertychange",deel:function(dc,e,ap){return function(dd){if(dd.propertyName==="value"){dd.type="input";return ap.call(dc,dd)}}}}}if(cz.onmousewheel===void 0){var aJ=cz.onwheel!==void 0?"wheel":"DOMMouseScroll";var by=aJ==="wheel"?"deltaY":"detail";br.mousewheel={type:aJ,deel:function(dc,e,ap){return function(dd){dd.wheelDeltaY=dd.wheelDelta=dd[by]>0?-120:120;dd.wheelDeltaX=0;if(Object.defineProperty){Object.defineProperty(dd,"type",{value:"mousewheel"})}ap.call(dc,dd)}}}}function cq(e){for(var ap in e){if(!aN.call(e,ap)){continue}var dc=e[ap];if(typeof cq.plugins[ap]==="function"){cq.plugins[ap](dc)}else{if(typeof cq[ap]==="object"){avalon.mix(cq[ap],dc)}else{cq[ap]=dc}}}return this}var ak,bp,ar,ca,bc,ac=/[-.*+?^${}()|[\]\/\\]/g;function cc(e){return(e+"").replace(ac,"\\$&")}var w={loader:function(ap){var e=r&&ap;aQ.require=e?r:ax;aQ.define=e?r.define:cx},interpolate:function(dd){ak=dd[0];bp=dd[1];if(ak===bp){throw new SyntaxError("openTag!==closeTag")}else{if(dd+""==="<!--,-->"){cq.commentInterpolate=true}else{var dc=ak+"test"+bp;c1.innerHTML=dc;if(c1.innerHTML!==dc&&c1.innerHTML.indexOf("&lt;")>-1){throw new SyntaxError("此定界符不合法")}c1.innerHTML=""}}var e=cc(ak),ap=cc(bp);ar=new RegExp(e+"(.*?)"+ap);ca=new RegExp(e+"(.*?)"+ap,"g");bc=new RegExp(e+".*?"+ap+"|\\sms-")}};cq.debug=true;cq.plugins=w;cq.plugins.interpolate(["{{","}}"]);cq.paths={};cq.shim={};cq.maxRepeatSize=100;avalon.config=cq;var cW=/(\w+)\[(avalonctrl)="(\S+)"\]/;var cr=cz.querySelectorAll?function(e){return cz.querySelectorAll(e)}:function(df){var ap=df.match(cW);var de=cz.getElementsByTagName(ap[1]);var e=[];for(var dc=0,dd;dd=de[dc++];){if(dd.getAttribute(ap[2])===ap[3]){e.push(dd)}}return e};var cF={$watch:function(ap,dc){if(typeof dc==="function"){var e=this.$events[ap];if(e){e.push(dc)}else{this.$events[ap]=[dc]}}else{this.$events=this.$watch.backup}return this},$unwatch:function(dc,dd){var de=arguments.length;if(de===0){this.$watch.backup=this.$events;this.$events={}}else{if(de===1){this.$events[dc]=[]}else{var e=this.$events[dc]||[];var ap=e.length;while(~--ap<0){if(e[ap]===dd){return e.splice(ap,1)}}}}return this},$fire:function(dj){var ap,de,dn,dm;if(/^(\w+)!(\S+)$/.test(dj)){ap=RegExp.$1;dj=RegExp.$2}var dk=this.$events;if(!dk){return}var dh=cL.call(arguments,1);var dd=[dj].concat(dh);if(ap==="all"){for(de in avalon.vmodels){dn=avalon.vmodels[de];if(dn!==this){dn.$fire.apply(dn,dd)}}}else{if(ap==="up"||ap==="down"){var di=dk.expr?cr(dk.expr):[];if(di.length===0){return}for(de in avalon.vmodels){dn=avalon.vmodels[de];if(dn!==this){if(dn.$events.expr){var df=cr(dn.$events.expr);if(df.length===0){continue}Array.prototype.forEach.call(df,function(dp){Array.prototype.forEach.call(di,function(dq){var dr=ap==="down"?dq.contains(dp):dp.contains(dq);if(dr){dp._avalon=dn}})})}}}var e=cz.getElementsByTagName("*");var dg=[];Array.prototype.forEach.call(e,function(dp){if(dp._avalon){dg.push(dp._avalon);dp._avalon="";dp.removeAttribute("_avalon")}});if(ap==="up"){dg.reverse()}for(de=0;dm=dg[de++];){if(dm.$fire.apply(dm,dd)===false){break}}}else{var dc=dk[dj]||[];var dl=dk.$all||[];for(de=0;dm=dc[de++];){if(C(dm)){dm.apply(this,dh)}}for(de=0;dm=dl[de++];){if(C(dm)){dm.apply(this,arguments)}}}}}};var cR=avalon.vmodels={};avalon.define=function(de,dc){var dd=de.$id||de;if(!dd){ct("warning: vm必须指定$id")}if(cR[dd]){ct("warning: "+dd+" 已经存在于avalon.vmodels中")}if(typeof de==="object"){var e=aC(de)}else{var ap={$watch:o};dc(ap);e=aC(ap);c0=true;dc(e);c0=false}e.$id=dd;return cR[dd]=e};var aX=String("$id,$watch,$unwatch,$fire,$events,$model,$skipArray").match(bU);function ai(ap,dd,dc){if(C(dd)||dd&&dd.nodeType){return false}if(dc.indexOf(ap)!==-1){return false}if(aX.indexOf(ap)!==-1){return false}var e=dc.$special;if(ap&&ap.charAt(0)==="$"&&!e[ap]){return false}return true}var b6={};function aS(dd,ap,di,dc){switch(dd.type){case 0:var e=dd.get;var de=dd.set;if(C(de)){var df=dc.$events;var dj=df[ap];df[ap]=[];de.call(dc,di);df[ap]=dj}return e.call(dc);case 1:return di;case 2:if(di!==dc.$model[ap]){var dg=dd.svmodel=a3(dc,ap,di,dd.valueType);di=dg.$model;var dh=b6[dg.$id];dh&&dh()}return di}}var aj=Object.defineProperty;var bE=true;try{aj({},"_",{value:"x"});var f=Object.defineProperties}catch(ck){bE=false}function aC(dj,ap,df){if(Array.isArray(dj)){var dg=dj.concat();dj.length=0;var dd=aI(dj);dd.pushArray(dg);return dd}if(!dj||dj.nodeType>0||(dj.$id&&dj.$events)){return dj}if(!Array.isArray(dj.$skipArray)){dj.$skipArray=[]}dj.$skipArray.$special=ap||{};var dc={};df=df||{};var dh={};var di={};var dl=[];for(var de in dj){(function(dm,dq){df[dm]=dq;if(!ai(dm,dq,dj.$skipArray)){return}dh[dm]=[];var dp=avalon.type(dq);var dn=function(dw){var du=dn._name;var ds=this;var dr=ds.$model;var dt=dr[du];var dv=ds.$events;if(arguments.length){if(c0){return}if(dn.type!==1){dw=aS(dn,du,dw,ds);if(!dn.type){return}}if(!bT(dt,dw)){dr[du]=dw;cK(dv[du]);bb(ds,du,dw,dt)}}else{if(dn.type===0){dw=dn.get.call(ds);if(dt!==dw){dr[du]=dw;bb(ds,du,dw,dt)}return dw}else{bs(dv[du]);return dn.svmodel||dt}}};if(dp==="object"&&C(dq.get)&&Object.keys(dq).length<=2){dn.set=dq.set;dn.get=dq.get;dn.type=0;dl.push(function(){var dr={evaluator:function(){dr.type=Math.random(),dr.element=null;df[dm]=dn.get.call(dc)},element:b,type:Math.random(),handler:o,args:[]};a1[cf]=dr;dn.call(dc);delete a1[cf]})}else{if(c5.test(dp)){dn.type=2;dn.valueType=dp;dl.push(function(){var dr=aC(dq,0,df[dm]);dn.svmodel=dr;dr.$events[cE]=dh[dm]})}else{dn.type=1}}dn._name=dm;di[dm]=dn})(de,dj[de])}aX.forEach(function(dm){delete dj[dm];delete df[dm]});dc=f(dc,R(di),dj);for(var e in dj){if(!di[e]){dc[e]=dj[e]}}dc.$id=bF();dc.$model=df;dc.$events=dh;for(de in cF){var dk=cF[de];if(!aW){dk=dk.bind(dc)}dc[de]=dk}if(bE){Object.defineProperty(dc,"hasOwnProperty",{value:function(dm){return dm in this.$model},writable:false,enumerable:false,configurable:true})}else{dc.hasOwnProperty=function(dm){return dm in dc.$model}}dl.forEach(function(dm){dm()});return dc}var bT=Object.is||function(ap,e){if(ap===0&&e===0){return 1/ap===1/e}else{if(ap!==ap){return e!==e}else{return ap===e}}};function bb(ap,e,dd,dc){if(ap.$events){cF.$fire.call(ap,e,dd,dc)}}var R=aW?function(dc){var e={};for(var ap in dc){e[ap]={get:dc[ap],set:dc[ap],enumerable:true,configurable:true}}return e}:function(e){return e};function a3(ap,de,dg,dh){var dd=ap[de];if(dh==="array"){if(!Array.isArray(dg)||dd===dg){return dd}dd._.$unwatch();dd.clear();dd._.$watch();dd.pushArray(dg.concat());return dd}else{var e=ap.$events[de];var df=dd.$events.$withProxyPool;if(df){P(df,"with");dd.$events.$withProxyPool=null}var dc=aC(dg);dc.$events[cE]=e;b6[dc.$id]=function(di){while(di=e.shift()){(function(dj){avalon.nextTick(function(){var dk=dj.type;if(dk&&c2[dk]){dj.rollback&&dj.rollback();c2[dk](dj,dj.vmodels)}})})(di)}delete b6[dc.$id]};return dc}}if(!bE){if("__defineGetter__" in avalon){aj=function(e,dc,ap){if("value" in ap){e[dc]=ap.value}if("get" in ap){e.__defineGetter__(dc,ap.get)}if("set" in ap){e.__defineSetter__(dc,ap.set)}return e};f=function(ap,e){for(var dc in e){if(e.hasOwnProperty(dc)){aj(ap,dc,e[dc])}}return ap}}if(aY){aQ.execScript(["Function parseVB(code)","\tExecuteGlobal(code)","End Function","Dim VBClassBodies",'Set VBClassBodies=CreateObject("Scripting.Dictionary")',"Function findOrDefineVBClass(name,body)","\tDim found",'\tfound=""',"\tFor Each key in VBClassBodies","\t\tIf body=VBClassBodies.Item(key) Then","\t\t\tfound=key","\t\t\tExit For","\t\tEnd If","\tnext",'\tIf found="" Then','\t\tparseVB("Class " + name + body)',"\t\tVBClassBodies.Add name, body","\t\tfound=name","\tEnd If","\tfindOrDefineVBClass=found","End Function"].join("\n"),"VBScript");function cm(e,dc,ap,de){var dd=dc[ap];if(arguments.length===4){dd.call(e,de)}else{return dd.call(e)}}f=function(dd,de,dc){var e="VBClass"+setTimeout("1"),dh=[];dh.push("\r\n\tPrivate [__data__], [__proxy__]","\tPublic Default Function [__const__](d, p)","\t\tSet [__data__] = d: set [__proxy__] = p","\t\tSet [__const__] = Me","\tEnd Function");for(dd in dc){if(!de.hasOwnProperty(dd)){dh.push("\tPublic ["+dd+"]")}}aX.forEach(function(di){if(!de.hasOwnProperty(di)){dh.push("\tPublic ["+di+"]")}});dh.push("\tPublic [hasOwnProperty]");for(dd in de){dh.push("\tPublic Property Let ["+dd+"](val"+cf+")",'\t\tCall [__proxy__](Me,[__data__], "'+dd+'", val'+cf+")","\tEnd Property","\tPublic Property Set ["+dd+"](val"+cf+")",'\t\tCall [__proxy__](Me,[__data__], "'+dd+'", val'+cf+")","\tEnd Property","\tPublic Property Get ["+dd+"]","\tOn Error Resume Next","\t\tSet["+dd+'] = [__proxy__](Me,[__data__],"'+dd+'")',"\tIf Err.Number <> 0 Then","\t\t["+dd+'] = [__proxy__](Me,[__data__],"'+dd+'")',"\tEnd If","\tOn Error Goto 0","\tEnd Property")}dh.push("End Class");var dg=dh.join("\r\n"),df=aQ.findOrDefineVBClass(e,dg);if(df===e){aQ.parseVB(["Function "+e+"Factory(a, b)","\tDim o","\tSet o = (New "+e+")(a, b)","\tSet "+e+"Factory = o","End Function"].join("\r\n"))}var ap=aQ[df+"Factory"](de,cm);return ap}}}function aI(e){var dc=[];dc.$id=bF();dc.$model=e;dc.$events={};dc.$events[cE]=[];dc._=aC({length:e.length});dc._.$watch("length",function(de,dd){dc.$fire("length",de,dd)});for(var ap in cF){dc[ap]=cF[ap]}avalon.mix(dc,cS);return dc}function bL(di,dk,ap,de,e,dj,df){var dd=this.length,dc=2;while(--dc){switch(di){case"add":var dh=this.$model.slice(dk,dk+ap).map(function(dl){if(c5.test(avalon.type(dl))){return dl.$id?dl:aC(dl,0,dl)}else{return dl}});bP.apply(this,[dk,0].concat(dh));this._fire("add",dk,ap);break;case"del":var dg=this._splice(dk,ap);this._fire("del",dk,ap);break}if(e){di=e;dk=dj;ap=df;dc=2;e=0}}this._fire("index",de);if(this.length!==dd){this._.length=this.length}return dg}var bP=cJ.splice;var cS={_splice:bP,_fire:function(dc,ap,e){cK(this.$events[cE],dc,ap,e)},size:function(){return this._.length},pushArray:function(dc){var e=dc.length,ap=this.length;if(e){cJ.push.apply(this.$model,dc);bL.call(this,"add",ap,e,Math.max(0,ap-1))}return e+ap},push:function(){var dc=[];var e,ap=arguments.length;for(e=0;e<ap;e++){dc[e]=arguments[e]}return this.pushArray(dc)},unshift:function(){var e=arguments.length,ap=this.length;if(e){cJ.unshift.apply(this.$model,arguments);bL.call(this,"add",0,e,0)}return e+ap},shift:function(){if(this.length){var e=this.$model.shift();bL.call(this,"del",0,1,0);return e}},pop:function(){var ap=this.length;if(ap){var e=this.$model.pop();bL.call(this,"del",ap-1,1,Math.max(0,ap-2));return e}},splice:function(de){var e=arguments.length,ap=[],dd;var dc=bP.apply(this.$model,arguments);if(dc.length){ap.push("del",de,dc.length,0);dd=true}if(e>2){if(dd){ap.splice(3,1,0,"add",de,e-2)}else{ap.push("add",de,e-2,0)}dd=true}if(dd){return bL.apply(this,ap)}else{return[]}},contains:function(e){return this.indexOf(e)!==-1},remove:function(e){return this.removeAt(this.indexOf(e))},removeAt:function(e){if(e>=0){this.$model.splice(e,1);return bL.call(this,"del",e,1,0)}return[]},clear:function(){this.$model.length=this.length=this._.length=0;this._fire("clear",0);return this},removeAll:function(dc){if(Array.isArray(dc)){dc.forEach(function(dd){this.remove(dd)},this)}else{if(typeof dc==="function"){for(var e=this.length-1;e>=0;e--){var ap=this[e];if(dc(ap,e)){this.removeAt(e)}}}else{this.clear()}}},ensure:function(e){if(!this.contains(e)){this.push(e)}return this},set:function(e,dd){if(e>=0){var dc=avalon.type(dd);if(dd&&dd.$model){dd=dd.$model}var de=this[e];if(dc==="object"){for(var ap in dd){if(de.hasOwnProperty(ap)){de[ap]=dd[ap]}}}else{if(dc==="array"){de.clear().push.apply(de,dd)}else{if(de!==dd){this[e]=dd;this.$model[e]=dd;this._fire("set",e,dd)}}}}return this}};function bk(df,ap){var dd={};for(var dc=0,de=ap.length;dc<de;dc++){dd[dc]=df[dc];var e=ap[dc];if(e in dd){df[dc]=dd[e];delete dd[e]}else{df[dc]=df[e]}}}"sort,reverse".replace(bU,function(e){cS[e]=function(){var dh=this.$model;var dg=dh.concat();var dj=Math.random();var de=[];var dk;cJ[e].apply(dh,arguments);for(var dd=0,dc=dg.length;dd<dc;dd++){var di=dh[dd];var ap=dg[dd];if(bT(di,ap)){de.push(dd)}else{var df=dg.indexOf(di);de.push(df);dg[df]=dj;dk=true}}if(dk){bk(this,de);this._fire("move",de);this._fire("index",0)}return this}});var b1=/^(duplex|on)$/;function i(de){a1[cf]=de;avalon.openComputedCollect=true;var dc=de.evaluator;if(dc){try{var dg=b1.test(de.type)?de:dc.apply(0,de.args);de.handler(dg,de.element,de)}catch(df){delete de.evaluator;var dd=de.element;if(dd.nodeType===3){var ap=dd.parentNode;if(cq.commentInterpolate){ap.replaceChild(cz.createComment(de.value),dd)}else{dd.data=ak+de.value+bp}}}}avalon.openComputedCollect=false;delete a1[cf]}function bs(ap){var e=a1[cf];if(ap&&e&&avalon.Array.ensure(ap,e)&&e.element){ad(e,ap)}}function ad(ap,e){ap.$uuid=ap.$uuid||bF();e.$uuid=e.$uuid||bF();var dc={data:ap,list:e,$$uuid:ap.$uuid+e.$uuid};if(!c7[dc.$$uuid]){c7[dc.$$uuid]=1;c7.push(dc)}}function bX(ap){ap.element=null;ap.rollback&&ap.rollback();for(var e in ap){ap[e]=null}}function y(ap){try{if(!ap.parentNode){return true}}catch(dc){return true}return ap.msRetain?0:(ap.nodeType===1?typeof ap.sourceIndex==="number"?ap.sourceIndex===0:!cT.contains(ap):!avalon.contains(cT,ap))}var c7=avalon.$$subscribers=[];var aU=new Date();var b9={};function at(){var dd=c7.length;var e=dd;var ap=0;var df;var dg=[];var di={};var dc={};while(df=c7[--dd]){var de=df.data;var dh=de.type;if(di[dh]){di[dh]++}else{di[dh]=1;dg.push(dh)}}var dj=false;dg.forEach(function(dk){if(b9[dk]!==di[dk]){dc[dk]=1;dj=true}});dd=e;if(dj){while(df=c7[--dd]){de=df.data;if(de.element===void 0){continue}if(dc[de.type]&&y(de.element)){ap++;c7.splice(dd,1);delete c7[df.$$uuid];avalon.Array.remove(df.list,de);bX(de);df.data=df.list=null}}}b9=di;aU=new Date()}function cK(df){if(df&&df.length){if(new Date()-aU>444&&typeof df[0]==="object"){at()}var ap=cL.call(arguments,1);for(var dc=df.length,de;de=df[--dc];){var dd=de.element;if(dd&&dd.parentNode){if(de.$repeat){de.handler.apply(de,ap)}else{if(de.type!=="on"){var e=de.evaluator||o;de.handler(e.apply(0,de.args||[]),dd,de)}}}}}}var bv={area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],col:[2,"<table><colgroup>","</colgroup></table>"],legend:[1,"<fieldset>","</fieldset>"],option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],tr:[2,"<table>","</table>"],td:[3,"<table><tr>","</tr></table>"],g:[1,'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1">',"</svg>"],_default:aW?[0,"",""]:[1,"X<div>","</div>"]};bv.th=bv.td;bv.optgroup=bv.option;bv.tbody=bv.tfoot=bv.colgroup=bv.caption=bv.thead;String("circle,defs,ellipse,image,line,path,polygon,polyline,rect,symbol,text,use").replace(bU,function(e){bv[e]=bv.g});var da=/<([\w:]+)/;var O=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig;var bV=aW?/[^\d\D]/:/(<(?:script|link|style|meta|noscript))/ig;var X=c3(["","text/javascript","text/ecmascript","application/ecmascript","application/javascript"]);var bZ=/<(?:tb|td|tf|th|tr|col|opt|leg|cap|area)/;var bg=cz.createElement("script");var ab=/<|&#?\w+;/;avalon.parseHTML=function(dj){var dd=cn.cloneNode(false);if(typeof dj!=="string"){return dd}if(!ab.test(dj)){dd.appendChild(cz.createTextNode(dj));return dd}dj=dj.replace(O,"<$1></$2>").trim();var dl=(da.exec(dj)||["",""])[1].toLowerCase(),de=bv[dl]||bv._default,ap=c1,e,dk;if(!aW){dj=dj.replace(bV,"<br class=msNoScope>$1")}ap.innerHTML=de[1]+dj+de[2];var dh=ap.getElementsByTagName("script");if(dh.length){for(var di=0,df;df=dh[di++];){if(X[df.type]){dk=bg.cloneNode(false);cJ.forEach.call(df.attributes,function(dm){if(dm&&dm.specified){dk[dm.name]=dm.value;dk.setAttribute(dm.name,dm.value)}});dk.text=df.text;df.parentNode.replaceChild(dk,df)}}}if(!aW){var dc=de[1]==="X<div>"?ap.lastChild.firstChild:ap.lastChild;if(dc&&dc.tagName==="TABLE"&&dl!=="tbody"){for(dh=dc.childNodes,di=0;df=dh[di++];){if(df.tagName==="TBODY"&&!df.innerHTML){dc.removeChild(df);break}}}dh=ap.getElementsByTagName("br");var dg=dh.length;while(df=dh[--dg]){if(df.className==="msNoScope"){df.parentNode.removeChild(df)}}for(dh=ap.all,di=0;df=dh[di++];){if(x(df)){bQ(df)}}}for(di=de[0];di--;ap=ap.lastChild){}while(e=ap.firstChild){dd.appendChild(e)}return dd};function x(e){var ap=e.nodeName;return ap.toLowerCase()===ap&&e.scopeName&&e.outerText===""}function bQ(e){if(e.currentStyle.behavior!=="url(#default#VML)"){e.style.behavior="url(#default#VML)";e.style.display="inline-block";e.style.zoom=1}}avalon.innerHTML=function(dd,dc){if(!aW&&(!bV.test(dc)&&!bZ.test(dc))){try{dd.innerHTML=dc;return}catch(de){}}var ap=this.parseHTML(dc);this.clearHTML(dd).appendChild(ap)};avalon.clearHTML=function(e){e.textContent="";while(e.firstChild){e.removeChild(e.firstChild)}return e};avalon.scan=function(ap,dd,dc){ap=ap||cT;var e=dd?[].concat(dd):[];bA(ap,e)};var bd=c3("area,base,basefont,br,col,command,embed,hr,img,input,link,meta,param,source,track,wbr,noscript,script,style,textarea".toUpperCase());function g(e,dc,ap){var dd=setTimeout(function(){var de=e.innerHTML;clearTimeout(dd);if(de===ap){dc()}else{g(e,dc,de)}})}function V(e,dc){var ap=e.getAttribute("avalonctrl")||dc.$id;e.setAttribute("avalonctrl",ap);dc.$events.expr=e.tagName+'[avalonctrl="'+ap+'"]'}var a2=function(de,ap,e){var df=de.getAttribute(ap);if(df){for(var dc=0,dd;dd=e[dc++];){if(dd.hasOwnProperty(df)&&typeof dd[df]==="function"){return dd[df]}}}};function af(dd,e){for(var ap=0,dc;dc=dd[ap++];){dc.vmodels=e;c2[dc.type](dc,e);if(dc.evaluator&&dc.element&&dc.element.nodeType===1){dc.element.removeAttribute(dc.name)}}dd.length=0}var a9=aY&&aQ.MutationObserver?function(dc){var ap=dc.firstChild,dd;while(ap){var e=ap.nextSibling;if(ap.nodeType===3){if(dd){dd.nodeValue+=ap.nodeValue;dc.removeChild(ap)}else{dd=ap}}else{dd=null}ap=e}}:0;var a5=/ms-(\w+)-?(.*)/;var S={"if":10,repeat:90,data:100,widget:110,each:1400,"with":1500,duplex:2000,on:3000};var I=c3("animationend,blur,change,input,click,dblclick,focus,keydown,keypress,keyup,mousedown,mouseenter,mouseleave,mousemove,mouseout,mouseover,mouseup,scan,scroll,submit");var cw=c3("value,title,alt,checked,selected,disabled,readonly,enabled");function J(ap,e){return ap.priority-e.priority}function aR(df,dd){var dh=M?M(df):avalon.slice(df.attributes);var dc=[],dl={},dk;for(var dj=0,dm;dm=dh[dj++];){if(dm.specified){if(dk=dm.name.match(a5)){var dn=dk[1];var de=dk[2]||"";var dp=dm.value;var ap=dm.name;dl[ap]=dp;if(I[dn]){de=dn;dn="on"}else{if(cw[dn]){ct("warning!请改用ms-attr-"+dn+"代替ms-"+dn+"！");if(dn==="enabled"){ct("warning!ms-enabled或ms-attr-enabled已经被废弃");dn="disabled";dp="!("+dp+")"}de=dn;dn="attr";df.removeAttribute(ap);ap="ms-attr-"+de;df.setAttribute(ap,dp);dk=[ap];dl[ap]=dp}}if(typeof c2[dn]==="function"){var e={type:dn,param:de,element:df,name:dk[0],value:dp,priority:dn in S?S[dn]:dn.charCodeAt(0)*10+(Number(de)||0)};if(dn==="html"||dn==="text"){var dg=s(dp);avalon.mix(e,dg);e.filters=e.filters.replace(c8,function(){e.type="html";e.group=1;return""})}if(ap==="ms-if-loop"){e.priority+=100}if(dd.length){dc.push(e);if(dn==="widget"){df.msData=df.msData||dl}}}}}}dc.sort(J);var di=df.type;if(di&&dl["ms-duplex"]){if(dl["ms-attr-checked"]&&/radio|checkbox/.test(di)){ct("warning!"+di+"控件不能同时定义ms-attr-checked与ms-duplex")}if(dl["ms-attr-value"]&&/text|password/.test(di)){ct("warning!"+di+"控件不能同时定义ms-attr-value与ms-duplex")}}var dq=true;for(dj=0;e=dc[dj];dj++){dn=e.type;if(bG.test(dn)){return af(dc.slice(0,dj+1),dd)}else{if(dq){dq=!H.test(dn)}}}af(dc,dd);if(dq&&!bd[df.tagName]&&bc.test(df.innerHTML.replace(cX,"<").replace(ay,">"))){a9&&a9(df);b7(df,dd)}}var bG=/^if|widget|repeat$/;var H=/^each|with|html|include$/;if(!"1"[0]){var t=new l(512);var bj=/\s+(ms-[^=\s]+)(?:=("[^"]*"|'[^']*'|[^\s>]+))?/g,aO=/^['"]/,bq=/<\w+\b(?:(["'])[^"]*?(\1)|[^>])*>/i,U=/&amp;/g;var M=function(dc){var dg=dc.outerHTML;if(dg.slice(0,2)==="</"||!dg.trim()){return[]}var di=dg.match(bq)[0];var de=[],df,dd,dj;var dh=t.get(di);if(dh){return dh}while(dd=bj.exec(di)){dj=dd[2];if(dj){dj=(aO.test(dj)?dj.slice(1,-1):dj).replace(U,"&")}var ap=dd[1].toLowerCase();df=ap.match(a5);var e={name:ap,specified:true,value:dj||""};de.push(e)}return t.put(di,de)}}function b7(ap,dc){var dd=ap.firstChild;while(dd){var e=dd.nextSibling;cb(dd,dd.nodeType,dc);dd=e}}function aZ(e,ap){for(var dc=0,dd;dd=e[dc++];){cb(dd,dd.nodeType,ap)}}function cb(dc,e,ap){if(e===1){bA(dc,ap)}else{if(e===3&&ar.test(dc.data)){c4(dc,ap)}else{if(cq.commentInterpolate&&e===8&&!ar.test(dc.nodeValue)){c4(dc,ap)}}}}function bA(df,dd,de){var ap=df.getAttribute("ms-skip");if(!df.getAttributeNode){return ct("warning "+df.tagName+" no getAttributeNode method")}var e=df.getAttributeNode("ms-important");var dh=df.getAttributeNode("ms-controller");if(typeof ap==="string"){return}else{if(de=e||dh){var dg=avalon.vmodels[de.value];if(!dg){return}dd=de===e?[dg]:[dg].concat(dd);var dc=de.name;df.removeAttribute(dc);avalon(df).removeClass(dc);V(df,dg)}}aR(df,dd)}var c8=/\|\s*html\s*/,bu=/\|\|/g,cX=/&lt;/g,ay=/&gt;/g;rstringLiteral=/(['"])(\\\1|.)+?\1/g;function s(dc){if(dc.indexOf("|")>0){var ap=dc.replace(rstringLiteral,function(dd){return Array(dd.length+1).join("1")});var e=ap.replace(bu,"\u1122\u3344").indexOf("|");if(e>-1){return{filters:dc.slice(e),value:dc.slice(0,e),expr:true}}}return{value:dc,filters:"",expr:true}}function ag(dc){var de=[],ap,dd=0,e;do{e=dc.indexOf(ak,dd);if(e===-1){break}ap=dc.slice(dd,e);if(ap){de.push({value:ap,filters:"",expr:false})}dd=e+ak.length;e=dc.indexOf(bp,dd);if(e===-1){break}ap=dc.slice(dd,e);if(ap){de.push(s(ap))}dd=e+bp.length}while(1);ap=dc.slice(dd);if(ap){de.push({value:ap,expr:false,filters:""})}return de}function c4(de,e){var dg=[];if(de.nodeType===8){var dc=s(de.nodeValue);var df=[dc]}else{df=ag(de.data)}if(df.length){for(var ap=0;dc=df[ap++];){var dd=cz.createTextNode(dc.value);if(dc.expr){dc.type="text";dc.element=dd;dc.filters=dc.filters.replace(c8,function(){dc.type="html";dc.group=1;return""});dg.push(dc)}cn.appendChild(dd)}de.parentNode.replaceChild(cn,de);if(dg.length){af(dg,e)}}}function bx(e){return e.replace(/([a-z\d])([A-Z]+)/g,"$1-$2").toLowerCase()}function j(e){if(e.indexOf("-")<0&&e.indexOf("_")<0){return e}return e.replace(/[-_][^-_]/g,function(ap){return ap.charAt(1).toUpperCase()})}var aa={_toString:function(){var ap=this.node;var e=ap.className;var dc=typeof e==="string"?e:e.baseVal;return dc.split(/\s+/).join(" ")},_contains:function(e){return(" "+this+" ").indexOf(" "+e+" ")>-1},_add:function(e){if(!this.contains(e)){this._set(this+" "+e)}},_remove:function(e){this._set((" "+this+" ").replace(" "+e+" "," "))},__set:function(e){e=e.trim();var ap=this.node;if(aA.test(ap)){ap.setAttribute("class",e)}else{ap.className=e}}};function bo(ap){if(!("classList" in ap)){ap.classList={node:ap};for(var e in aa){ap.classList[e.slice(1)]=aa[e]}}return ap.classList}"add,remove".replace(bU,function(e){avalon.fn[e+"Class"]=function(ap){var dc=this[0];if(ap&&typeof ap==="string"&&dc&&dc.nodeType===1){ap.replace(/\S+/g,function(dd){bo(dc)[e](dd)})}return this}});avalon.fn.mix({hasClass:function(e){var ap=this[0]||{};return ap.nodeType===1&&bo(ap).contains(e)},toggleClass:function(df,dd){var e,dc=0;var dg=df.split(/\s+/);var ap=typeof dd==="boolean";while((e=dg[dc++])){var de=ap?dd:!this.hasClass(e);this[de?"addClass":"removeClass"](e)}return this},attr:function(e,ap){if(arguments.length===2){this[0].setAttribute(e,ap);return this}else{return this[0].getAttribute(e)}},data:function(ap,dc){ap="data-"+bx(ap||"");switch(arguments.length){case 2:this.attr(ap,dc);return this;case 1:var dd=this.attr(ap);return L(dd);case 0:var e={};cJ.forEach.call(this[0].attributes,function(de){if(de){ap=de.name;if(!ap.indexOf("data-")){ap=j(ap.slice(5));e[ap]=L(de.value)}}});return e}},removeData:function(e){e="data-"+bx(e);this[0].removeAttribute(e);return this},css:function(ap,dd){if(avalon.isPlainObject(ap)){for(var dc in ap){avalon.css(this,dc,ap[dc])}}else{var e=avalon.css(this,ap,dd)}return e!==void 0?e:this},position:function(){var dc,dd,ap=this[0],e={top:0,left:0};if(!ap){return}if(this.css("position")==="fixed"){dd=ap.getBoundingClientRect()}else{dc=this.offsetParent();dd=this.offset();if(dc[0].tagName!=="HTML"){e=dc.offset()}e.top+=avalon.css(dc[0],"borderTopWidth",true);e.left+=avalon.css(dc[0],"borderLeftWidth",true)}return{top:dd.top-e.top-avalon.css(ap,"marginTop",true),left:dd.left-e.left-avalon.css(ap,"marginLeft",true)}},offsetParent:function(){var e=this[0].offsetParent;while(e&&avalon.css(e,"position")==="static"){e=e.offsetParent}return avalon(e||cT)},bind:function(dc,ap,e){if(this[0]){return avalon.bind(this[0],dc,ap,e)}},unbind:function(dc,ap,e){if(this[0]){avalon.unbind(this[0],dc,ap,e)}return this},val:function(de){var dc=this[0];if(dc&&dc.nodeType===1){var e=arguments.length===0;var dd=e?":get":":set";var ap=b3[cU(dc)+dd];if(ap){var df=ap(dc,de)}else{if(e){return(dc.value||"").replace(/\r/g,"")}else{dc.value=de}}}return e?df:this}});function L(ap){try{if(typeof ap==="object"){return ap}ap=ap==="true"?true:ap==="false"?false:ap==="null"?null:+ap+""===ap?+ap:av.test(ap)?avalon.parseJSON(ap):ap}catch(dc){}return ap}var av=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,cl=/^[\],:{}\s]*$/,co=/(?:^|:|,)(?:\s*\[)+/g,cD=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,b0=/"[^"\\\r\n]*"|true|false|null|-?(?:\d+\.|)\d+(?:[eE][+-]?\d+|)/g;avalon.parseJSON=aQ.JSON?JSON.parse:function(e){if(typeof e==="string"){e=e.trim();if(e){if(cl.test(e.replace(cD,"@").replace(b0,"]").replace(co,""))){return(new Function("return "+e))()}}avalon.error("Invalid JSON: "+e)}return e};avalon.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,ap){avalon.fn[e]=function(df){var dc=this[0]||{},de=cu(dc),dd=e==="scrollTop";if(!arguments.length){return de?(ap in de)?de[ap]:cT[e]:dc[e]}else{if(de){de.scrollTo(!dd?df:avalon(de).scrollLeft(),dd?df:avalon(de).scrollTop())}else{dc[e]=df}}}});function cu(e){return e.window&&e.document?e:e.nodeType===9?e.defaultView||e.parentWindow:false}var c9=avalon.cssHooks={};var bn=["","-webkit-","-o-","-moz-","-ms-"];var a4={"float":aW?"cssFloat":"styleFloat"};avalon.cssNumber=c3("columnCount,order,fillOpacity,fontWeight,lineHeight,opacity,orphans,widows,zIndex,zoom");avalon.cssName=function(ap,dd,e){if(a4[ap]){return a4[ap]}dd=dd||cT.style;for(var dc=0,de=bn.length;dc<de;dc++){e=j(bn[dc]+ap);if(e in dd){return(a4[ap]=e)}}return null};c9["@:set"]=function(dc,ap,dd){try{dc.style[ap]=dd}catch(de){}};if(aQ.getComputedStyle){c9["@:get"]=function(dd,dc){if(!dd||!dd.style){throw new Error("getComputedStyle要求传入一个节点 "+dd)}var ap,e=getComputedStyle(dd,null);if(e){ap=dc==="filter"?e.getPropertyValue(dc):e[dc];if(ap===""){ap=dd.style[dc]}}return ap};c9["opacity:get"]=function(ap){var e=c9["@:get"](ap,"opacity");return e===""?"1":e}}else{var cv=/^-?(?:\d*\.)?\d+(?!px)[^\d\s]+$/i;var cp=/^(top|right|bottom|left)$/;var aE=/alpha\([^)]*\)/i;var Z=!!aQ.XDomainRequest;var u="DXImageTransform.Microsoft.Alpha";var cB={thin:Z?"1px":"2px",medium:Z?"3px":"4px",thick:Z?"5px":"6px"};c9["@:get"]=function(de,dc){var ap=de.currentStyle;var e=ap[dc];if((cv.test(e)&&!cp.test(e))){var dd=de.style,dg=dd.left,df=de.runtimeStyle.left;de.runtimeStyle.left=ap.left;dd.left=dc==="fontSize"?"1em":(e||0);e=dd.pixelLeft+"px";dd.left=dg;de.runtimeStyle.left=df}if(e==="medium"){dc=dc.replace("Width","Style");if(ap[dc]==="none"){e="0px"}}return e===""?"auto":cB[e]||e};c9["opacity:set"]=function(de,ap,df){var dd=de.style;var dc=isFinite(df)&&df<=1?"alpha(opacity="+df*100+")":"";var e=dd.filter||"";dd.zoom=1;dd.filter=(aE.test(e)?e.replace(aE,dc):e+" "+dc).trim();if(!dd.filter){dd.removeAttribute("filter")}};c9["opacity:get"]=function(e){var ap=e.filters.alpha||e.filters[u],dc=ap&&ap.enabled?ap.opacity:100;return(dc/100)+""}}"top,left".replace(bU,function(e){c9[e+":get"]=function(dc){var ap=c9["@:get"](dc,e);return/px$/.test(ap)?ap:avalon(dc).position()[e]+"px"}});var cd={position:"absolute",visibility:"hidden",display:"block"};var cQ=/^(none|table(?!-c[ea]).+)/;function ae(dc,de){if(dc.offsetWidth<=0){if(cQ.test(c9["@:get"](dc,"display"))){var dd={node:dc};for(var ap in cd){dd[ap]=dc.style[ap];dc.style[ap]=cd[ap]}de.push(dd)}var e=dc.parentNode;if(e&&e.nodeType===1){ae(e,de)}}}"Width,Height".replace(bU,function(dc){var dd=dc.toLowerCase(),ap="client"+dc,e="scroll"+dc,de="offset"+dc;c9[dd+":get"]=function(dh,di,dg){var dj=-4;if(typeof dg==="number"){dj=dg}di=dc==="Width"?["Left","Right"]:["Top","Bottom"];var df=dh[de];if(dj===2){return df+avalon.css(dh,"margin"+di[0],true)+avalon.css(dh,"margin"+di[1],true)}if(dj<0){df=df-avalon.css(dh,"border"+di[0]+"Width",true)-avalon.css(dh,"border"+di[1]+"Width",true)}if(dj===-4){df=df-avalon.css(dh,"padding"+di[0],true)-avalon.css(dh,"padding"+di[1],true)}return df};c9[dd+"&get"]=function(dh){var df=[];ae(dh,df);var dj=c9[dd+":get"](dh);for(var dg=0,di;di=df[dg++];){dh=di.node;for(var dk in di){if(typeof di[dk]==="string"){dh.style[dk]=di[dk]}}}return dj};avalon.fn[dd]=function(dg){var df=this[0];if(arguments.length===0){if(df.setTimeout){return df["inner"+dc]||df.document.documentElement[ap]}if(df.nodeType===9){var dh=df.documentElement;return Math.max(df.body[e],dh[e],df.body[de],dh[de],dh[ap])}return c9[dd+"&get"](df)}else{return this.css(dd,dg)}};avalon.fn["inner"+dc]=function(){return c9[dd+":get"](this[0],void 0,-2)};avalon.fn["outer"+dc]=function(df){return c9[dd+":get"](this[0],void 0,df===true?2:0)}});avalon.fn.offset=function(){var ap=this[0],de={left:0,top:0};if(!ap||!ap.tagName||!ap.ownerDocument){return de}var dj=ap.ownerDocument,df=dj.body,di=dj.documentElement,dg=dj.defaultView||dj.parentWindow;if(!avalon.contains(di,ap)){return de}if(ap.getBoundingClientRect){de=ap.getBoundingClientRect()}var dd=di.clientTop||df.clientTop,dh=di.clientLeft||df.clientLeft,e=Math.max(dg.pageYOffset||0,di.scrollTop,df.scrollTop),dc=Math.max(dg.pageXOffset||0,di.scrollLeft,df.scrollLeft);return{top:de.top+e-dd,left:de.left+dc-dh}};function cU(ap){var e=ap.tagName.toLowerCase();return e==="input"&&/checkbox|radio/.test(ap.type)?"checked":e}var cP=/^<option(?:\s+\w+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s>]+))?)*\s+value[\s=]/i;var b3={"option:get":aY?function(e){return cP.test(e.outerHTML)?e.value:e.text.trim()}:function(e){return e.value},"select:get":function(dc,di){var ap,dh=dc.options,df=dc.selectedIndex,e=b3["option:get"],de=dc.type==="select-one"||df<0,dj=de?null:[],dg=de?df+1:dh.length,dd=df<0?dg:de?df:0;for(;dd<dg;dd++){ap=dh[dd];if((ap.selected||dd===df)&&!ap.disabled){di=e(ap);if(de){return di}dj.push(di)}}return dj},"select:set":function(dd,dc,df){dc=[].concat(dc);var de=b3["option:get"];for(var e=0,ap;ap=dd.options[e++];){if((ap.selected=dc.indexOf(de(ap))>-1)){df=true}}if(!df){dd.selectedIndex=-1}}};var bC={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};var az=aQ.JSON&&JSON.stringify||function(e){return'"'+e.replace(/[\\\"\x00-\x1f]/g,function(ap){var dc=bC[ap];return typeof dc==="string"?dc:"\\u"+("0000"+ap.charCodeAt(0).toString(16)).slice(-4)})+'"'};var D=["break,case,catch,continue,debugger,default,delete,do,else,false","finally,for,function,if,in,instanceof,new,null,return,switch,this","throw,true,try,typeof,var,void,while,with","abstract,boolean,byte,char,class,const,double,enum,export,extends","final,float,goto,implements,import,int,interface,long,native","package,private,protected,public,short,static,super,synchronized","throws,transient,volatile","arguments,let,yield,undefined"].join(",");var Q=/\/\*[\w\W]*?\*\/|\/\/[^\n]*\n|\/\/[^\n]*$|"(?:[^"\\]|\\[\w\W])*"|'(?:[^'\\]|\\[\w\W])*'|[\s\t\n]*\.[\s\t\n]*[$\w\.]+/g;var bW=/[^\w$]+/g;var am=new RegExp(["\\b"+D.replace(/,/g,"\\b|\\b")+"\\b"].join("|"),"g");var n=/\b\d[^,]*/g;var G=/^,+|,+$/g;var cA=new l(512);var ci=function(dd){var dc=","+dd.trim();var ap=cA.get(dc);if(ap){return ap}var e=dd.replace(Q,"").replace(bW,",").replace(am,"").replace(n,"").replace(G,"").split(/^$|,+/);return cA.put(dc,T(e))};function ba(dg,de,dc,df){var ap=[],e=" = "+dc+".";for(var dd=dg.length,dh;dh=dg[--dd];){if(de.hasOwnProperty(dh)){ap.push(dh+e+dh);df.vars.push(dh);if(df.type==="duplex"){dg.get=dc+"."+dh}dg.splice(dd,1)}}return ap}function T(df){var e=[],dd={};for(var ap=0;ap<df.length;ap++){var dc=df[ap];var de=dc&&typeof dc.$id==="string"?dc.$id:dc;if(!dd[de]){dd[de]=e.push(dc)}}return e}var cI=new l(128);var c=/\w\[.*\]|\w\.\w/;var B=/(\$proxy\$[a-z]+)\d+$/;var aT=/\)\s*$/;var bI=/\)\s*\|/g;var m=/\|\s*([$\w]+)/g;var aP=/"\s*\["/g;var F=/"\s*\(/g;function h(ap,e){e=e.replace(aT,"").replace(bI,function(){return"],|"}).replace(m,function(dd,dc){return"["+az(dc)}).replace(aP,function(){return'"],["'}).replace(F,function(){return'",'})+"]";return"return avalon.filters.$filter("+ap+", "+e+")"}function aM(ap,ds,du){var dk=du.type;var de=du.filters||"";var dj=ds.map(function(e){return String(e.$id).replace(B,"$1")})+ap+dk+de;var di=ci(ap).concat(),dd=[],dh=[],df=[],dq="";ds=T(ds);du.vars=[];for(var dl=0,dp=ds.length;dl<dp;dl++){if(di.length){var dv="vm"+cf+"_"+dl;dh.push(dv);df.push(ds[dl]);dd.push.apply(dd,ba(di,ds[dl],dv,du))}}if(!dd.length&&dk==="duplex"){return}if(dk!=="duplex"&&(ap.indexOf("||")>-1||ap.indexOf("&&")>-1)){du.vars.forEach(function(e){var dw=new RegExp("\\b"+e+"(?:\\.\\w+|\\[\\w+\\])+","ig");ap=ap.replace(dw,function(dy){var dD=dy.charAt(e.length);var dA=aY?ap.slice(arguments[1]+dy.length):RegExp.rightContext;var dB=/^\s*\(/.test(dA);if(dD==="."||dD==="["||dB){var dx="var"+String(Math.random()).replace(/^0\./,"");if(dB){var dC=dy.split(".");if(dC.length>2){var dz=dC.pop();dd.push(dx+" = "+dC.join("."));return dx+"."+dz}else{return dy}}dd.push(dx+" = "+dy);return dx}else{return dy}})})}du.args=df;var dg=cI.get(dj);if(dg){du.evaluator=dg;return}dq=dd.join(", ");if(dq){dq="var "+dq}if(/\S/.test(de)){if(!/text|html/.test(du.type)){throw Error("ms-"+du.type+"不支持过滤器")}ap="\nvar ret"+cf+" = "+ap+";\r\n";ap+=h("ret"+cf,de)}else{if(dk==="duplex"){var dc="'use strict';\nreturn function(vvv){\n\t"+dq+";\n\tif(!arguments.length){\n\t\treturn "+ap+"\n\t}\n\t"+(!c.test(ap)?di.get:ap)+"= vvv;\n} ";try{dg=Function.apply(o,dh.concat(dc));du.evaluator=cI.put(dj,dg)}catch(dr){ct("debug: parse error,"+dr.message)}return}else{if(dk==="on"){if(ap.indexOf("(")===-1){ap+=".call(this, $event)"}else{ap=ap.replace("(",".call(this,")}dh.push("$event");ap="\nreturn "+ap+";";var dn=ap.lastIndexOf("\nreturn");var dm=ap.slice(0,dn);var dt=ap.slice(dn);ap=dm+"\n"+dt}else{ap="\nreturn "+ap+";"}}}try{dg=Function.apply(o,dh.concat("'use strict';\n"+dq+ap));du.evaluator=cI.put(dj,dg)}catch(dr){ct("debug: parse error,"+dr.message)}finally{di=dd=dh=null}}function cY(ap,e,dc,de,dd){if(Array.isArray(de)){ap=de.map(function(df){return df.expr?"("+df.value+")":az(df.value)}).join(" + ")}aM(ap,e,dc);if(dc.evaluator&&!dd){dc.handler=aq[dc.handlerName||dc.type];i(dc)}}avalon.parseExprProxy=cY;var cM=["autofocus,autoplay,async,allowTransparency,checked,controls","declare,disabled,defer,defaultChecked,defaultSelected","contentEditable,isMap,loop,multiple,noHref,noResize,noShade","open,readOnly,selected"].join(",");var z={};cM.replace(bU,function(e){z[e.toLowerCase()]=e});var bH={"accept-charset":"acceptCharset","char":"ch",charoff:"chOff","class":"className","for":"htmlFor","http-equiv":"httpEquiv"};var k=["accessKey,bgColor,cellPadding,cellSpacing,codeBase,codeType,colSpan","dateTime,defaultValue,frameBorder,longDesc,maxLength,marginWidth,marginHeight","rowSpan,tabIndex,useMap,vSpace,valueType,vAlign"].join(",");k.replace(bU,function(e){bH[e.toLowerCase()]=e});var b4=/<noscript.*?>(?:[\s\S]+?)<\/noscript>/img;var bS=/<noscript.*?>([\s\S]+?)<\/noscript>/im;var cj=function(){return new (aQ.XMLHttpRequest||ActiveXObject)("Microsoft.XMLHTTP")};var ch=avalon.templateCache={};c2.attr=function(dd,e){var df=dd.value.trim(),de=true;if(df.indexOf(ak)>-1&&df.indexOf(bp)>2){de=false;if(ar.test(df)&&RegExp.rightContext===""&&RegExp.leftContext===""){de=true;df=RegExp.$1}}if(dd.type==="include"){var dc=dd.element;dd.includeRendered=a2(dc,"data-include-rendered",e);dd.includeLoaded=a2(dc,"data-include-loaded",e);var ap=dd.includeReplace=!!avalon(dc).data("includeReplace");if(avalon(dc).data("includeCache")){dd.templateCache={}}dd.startInclude=cz.createComment("ms-include");dd.endInclude=cz.createComment("ms-include-end");if(ap){dd.element=dd.startInclude;dc.parentNode.insertBefore(dd.startInclude,dc);dc.parentNode.insertBefore(dd.endInclude,dc.nextSibling)}else{dc.insertBefore(dd.startInclude,dc.firstChild);dc.appendChild(dd.endInclude)}}dd.handlerName="attr";cY(df,e,dd,(de?0:ag(dd.value)))};aq.attr=function(dx,dq,du){var df=du.type,dl=du.param;if(df==="css"){avalon(dq).css(dl,dx)}else{if(df==="attr"){if(z[dl]){var dg=z[dl];if(typeof dq[dg]==="boolean"){return dq[dg]=!!dx}}var ds=(dx===false)||(dx===null)||(dx===void 0);if(!aW&&bH[dl]){dl=bH[dl]}if(ds){return dq.removeAttribute(dl)}var dv=aA.test(dq)?false:(cz.namespaces&&x(dq))?true:dl in dq.cloneNode(false);if(dv){dq[dl]=dx}else{dq.setAttribute(dl,dx)}}else{if(df==="include"&&dx){var dm=du.vmodels;var di=du.includeRendered;var dn=du.includeLoaded;var dr=du.includeReplace;var dh=dr?dq.parentNode:dq;var dp=function(dC){if(dn){dC=dn.apply(dh,[dC].concat(dm))}if(di){g(dh,function(){di.call(dh)},NaN)}var dD=du.includeLastID;if(du.templateCache&&dD&&dD!==dx){var dA=du.templateCache[dD];if(!dA){dA=du.templateCache[dD]=cz.createElement("div");aG.appendChild(dA)}}du.includeLastID=dx;while(true){var dz=du.startInclude.nextSibling;if(dz&&dz!==du.endInclude){dh.removeChild(dz);if(dA){dA.appendChild(dz)}}else{break}}var dB=bl(du,dx,dC);var dy=avalon.slice(dB.childNodes);dh.insertBefore(dB,du.endInclude);aZ(dy,dm)};if(du.param==="src"){if(ch[dx]){avalon.nextTick(function(){dp(ch[dx])})}else{var de=cj();de.onreadystatechange=function(){if(de.readyState===4){var dy=de.status;if(dy>=200&&dy<300||dy===304||dy===1223){dp(ch[dx]=de.responseText)}}};de.open("GET",dx,true);if("withCredentials" in de){de.withCredentials=true}de.setRequestHeader("X-Requested-With","XMLHttpRequest");de.send(null)}}else{var ap=dx&&dx.nodeType===1?dx:cz.getElementById(dx);if(ap){if(ap.tagName==="NOSCRIPT"&&!(ap.innerHTML||ap.fixIE78)){de=cj();de.open("GET",location,false);de.send(null);var dt=cz.getElementsByTagName("noscript");var dd=(de.responseText||"").match(b4)||[];var dj=dd.length;for(var dk=0;dk<dj;dk++){var dw=dt[dk];if(dw){dw.style.display="none";dw.fixIE78=(dd[dk].match(bS)||["","&nbsp;"])[1]}}}avalon.nextTick(function(){dp(ap.fixIE78||ap.value||ap.innerText||ap.innerHTML)})}}}else{if(!cT.hasAttribute&&typeof dx==="string"&&(df==="src"||df==="href")){dx=dx.replace(/&amp;/g,"&")}dq[df]=dx;if(aQ.chrome&&dq.tagName==="EMBED"){var dc=dq.parentNode;var e=document.createComment("ms-src");dc.replaceChild(e,dq);dc.replaceChild(dq,e)}}}}};function bl(e,df,dc){var de=e.templateCache&&e.templateCache[df];if(de){var ap=cz.createDocumentFragment(),dd;while(dd=de.firstChild){ap.appendChild(dd)}return ap}return avalon.parseHTML(dc)}"title,alt,src,value,css,include,href".replace(bU,function(e){c2[e]=c2.attr});c2["class"]=function(df,ap){var dc=df.param,di=df.value,dd;df.handlerName="class";if(!dc||isFinite(dc)){df.param="";var dg=di.replace(ca,function(dj){return dj.replace(/./g,"0")});var dh=dg.indexOf(":");if(dh===-1){var e=di}else{e=di.slice(0,dh);dd=di.slice(dh+1);aM(dd,ap,df);if(!df.evaluator){ct("debug: ms-class '"+(dd||"").trim()+"' 不存在于VM中");return false}else{df._evaluator=df.evaluator;df._args=df.args}}var de=ar.test(e);if(!de){df.immobileClass=e}cY("",ap,df,(de?ag(e):0))}else{df.immobileClass=df.oldStyle=df.param;cY(di,ap,df)}};aq["class"]=function(ap,dc,de){var e=avalon(dc),df=de.type;if(df==="class"&&de.oldStyle){e.toggleClass(de.oldStyle,!!ap)}else{de.toggleClass=de._evaluator?!!de._evaluator.apply(dc,de._args):true;de.newClass=de.immobileClass||ap;if(de.oldClass&&de.newClass!==de.oldClass){e.removeClass(de.oldClass)}de.oldClass=de.newClass;switch(df){case"class":e.toggleClass(de.newClass,de.toggleClass);break;case"hover":case"active":if(!de.hasBindEvent){var dd="mouseenter";var dj="mouseleave";if(df==="active"){dc.tabIndex=dc.tabIndex||-1;dd="mousedown";dj="mouseup";var di=e.bind("mouseleave",function(){de.toggleClass&&e.removeClass(de.newClass)})}var dh=e.bind(dd,function(){de.toggleClass&&e.addClass(de.newClass)});var dg=e.bind(dj,function(){de.toggleClass&&e.removeClass(de.newClass)});de.rollback=function(){e.unbind("mouseleave",di);e.unbind(dd,dh);e.unbind(dj,dg)};de.hasBindEvent=true}break}}};"hover,active".replace(bU,function(e){c2[e]=c2["class"]});aq.data=function(dd,ap,dc){var e="data-"+dc.param;if(dd&&typeof dd==="object"){ap[e]=dd}else{ap.setAttribute(e,String(dd))}};var cO=c2.duplex=function(df,e){var ap=df.element,di;cY(df.value,e,df,0,1);df.changed=a2(ap,"data-duplex-changed",e)||o;if(df.evaluator&&df.args){var dd=[];var dc=c3("string,number,boolean,checked");if(ap.type==="radio"&&df.param===""){df.param="checked"}if(ap.msData){ap.msData["ms-duplex"]=df.value}df.param.replace(/\w+/g,function(dk){if(/^(checkbox|radio)$/.test(ap.type)&&/^(radio|checked)$/.test(dk)){if(dk==="radio"){ct("ms-duplex-radio已经更名为ms-duplex-checked")}dk="checked";df.isChecked=true}if(dk==="bool"){dk="boolean";ct("ms-duplex-bool已经更名为ms-duplex-boolean")}else{if(dk==="text"){dk="string";ct("ms-duplex-text已经更名为ms-duplex-string")}}if(dc[dk]){di=true}avalon.Array.ensure(dd,dk)});if(!di){dd.push("string")}df.param=dd.join("-");df.bound=function(dl,dm){if(ap.addEventListener){ap.addEventListener(dl,dm,false)}else{ap.attachEvent("on"+dl,dm)}var dk=df.rollback;df.rollback=function(){ap.avalonSetter=null;avalon.unbind(ap,dl,dm);dk&&dk()}};for(var de in avalon.vmodels){var dj=avalon.vmodels[de];dj.$fire("avalon-ms-duplex-init",df)}var dh=df.pipe||(df.pipe=bf);dh(null,df,"init");var dg=ap.tagName;cO[dg]&&cO[dg](ap,df.evaluator.apply(null,df.args),df)}};function cH(e){return e==null?"":e}avalon.duplexHooks={checked:{get:function(ap,e){return !e.element.oldValue}},string:{get:function(e){return e},set:cH},"boolean":{get:function(e){return e==="true"},set:cH},number:{get:function(dd,dc){var ap=parseFloat(dd);if(-dd===-ap){return ap}var e=/strong|medium|weak/.exec(dc.element.getAttribute("data-duplex-number"))||["medium"];switch(e[0]){case"strong":return 0;case"medium":return dd===""?"":0;case"weak":return dd}},set:cH}};function bf(de,dc,ap,dd){dc.param.replace(/\w+/g,function(e){var df=avalon.duplexHooks[e];if(df&&typeof df[ap]==="function"){de=df[ap](de,dc)}});return de}var K,ah=[];avalon.tick=function(e){if(ah.push(e)===1){K=setInterval(au,60)}};function au(){for(var ap=ah.length-1;ap>=0;ap--){var e=ah[ap];if(e()===false){ah.splice(ap,1)}}if(!ah.length){clearInterval(K)}}var bK=o;var Y=/text|password|hidden/;new function(){try{var ap={};var de=HTMLInputElement.prototype;var df=HTMLTextAreaElement.prototype;function dc(e){if(avalon.contains(cT,this)){ap[this.tagName].call(this,e);if(!Y.test(this.type)){return}if(!this.msFocus&&this.avalonSetter){this.avalonSetter()}}}var dg=HTMLInputElement.prototype;Object.getOwnPropertyNames(dg);ap.INPUT=Object.getOwnPropertyDescriptor(de,"value").set;Object.defineProperty(de,"value",{set:dc});ap.TEXTAREA=Object.getOwnPropertyDescriptor(df,"value").set;Object.defineProperty(df,"value",{set:dc})}catch(dd){bK=avalon.tick}};if(aY){avalon.bind(cz,"selectionchange",function(dc){var ap=cz.activeElement;if(ap&&typeof ap.avalonSetter==="function"){ap.avalonSetter()}})}cO.INPUT=function(ap,df,de){var dj=ap.type,dc=de.bound,e=avalon(ap),dn=false;function dl(dp){de.changed.call(this,dp,de)}function di(){dn=true}function dh(){dn=false}var dm=function(){if(dn){return}var dq=ap.oldValue=ap.value;var dp=de.pipe(dq,de,"get");if(e.data("duplex-observe")!==false){df(dp);dl.call(ap,dp);if(e.data("duplex-focus")){avalon.nextTick(function(){ap.focus()})}}};de.handler=function(){var dp=de.pipe(df(),de,"set")+"";if(dp!==ap.oldValue){ap.value=dp}};if(de.isChecked||dj==="radio"){var dg=aY===6;dm=function(){if(e.data("duplex-observe")!==false){var dp=de.pipe(ap.value,de,"get");df(dp);dl.call(ap,dp)}};de.handler=function(){var dq=df();var dp=de.isChecked?!!dq:dq+""===ap.value;ap.oldValue=dp;if(dg){setTimeout(function(){ap.defaultChecked=dp;ap.checked=dp},31)}else{ap.checked=dp}};dc("click",dm)}else{if(dj==="checkbox"){dm=function(){if(e.data("duplex-observe")!==false){var dp=ap.checked?"ensure":"remove";var dq=df();if(!Array.isArray(dq)){ct("ms-duplex应用于checkbox上要对应一个数组");dq=[dq]}avalon.Array[dp](dq,de.pipe(ap.value,de,"get"));dl.call(ap,dq)}};de.handler=function(){var dp=[].concat(df());ap.checked=dp.indexOf(de.pipe(ap.value,de,"get"))>-1};dc(aW?"change":"click",dm)}else{var dk=ap.getAttribute("data-duplex-event")||"input";if(ap.attributes["data-event"]){ct("data-event指令已经废弃，请改用data-duplex-event")}function dd(dp){setTimeout(function(){dm(dp)})}dk.replace(bU,function(dp){switch(dp){case"input":if(!aY){dc("input",dm);dc("compositionstart",di);dc("compositionend",dh);dc("DOMAutoComplete",dm)}else{if(aY>8){dc("input",dm)}else{dc("propertychange",function(dq){if(dq.propertyName==="value"){dm()}})}dc("dragend",dd)}break;default:dc(dp,dm);break}});dc("focus",function(){ap.msFocus=true});dc("blur",function(){ap.msFocus=false});if(Y.test(dj)){bK(function(){if(cT.contains(ap)){if(!ap.msFocus&&ap.oldValue!==ap.value){dm()}}else{if(!ap.msRetain){return false}}})}ap.avalonSetter=dm}}ap.oldValue=ap.value;i(de);dl.call(ap,ap.value)};cO.TEXTAREA=cO.INPUT;cO.SELECT=function(ap,de,dd){var e=avalon(ap);function dc(){if(e.data("duplex-observe")!==false){var df=e.val();if(Array.isArray(df)){df=df.map(function(dg){return dd.pipe(dg,dd,"get")})}else{df=dd.pipe(df,dd,"get")}if(df+""!==ap.oldValue){de(df)}dd.changed.call(ap,df,dd)}}dd.handler=function(){var df=de();df=df&&df.$model||df;if(Array.isArray(df)){if(!ap.multiple){ct("ms-duplex在<select multiple=true>上要求对应一个数组")}}else{if(ap.multiple){ct("ms-duplex在<select multiple=false>不能对应一个数组")}}df=Array.isArray(df)?df.map(String):df+"";if(df+""!==ap.oldValue){e.val(df);ap.oldValue=df+""}};dd.bound("change",dc);g(ap,function(){i(dd);dd.changed.call(ap,de(),dd)},NaN)};aq.html=function(dd,df,dh){dd=dd==null?"":dd;var dk="group" in dh;var dj=dk?df.parentNode:df;if(!dj){return}if(dd.nodeType===11){var ap=dd}else{if(dd.nodeType===1||dd.item){var e=dd.nodeType===1?dd.childNodes:dd.item?dd:[];ap=cn.cloneNode(true);while(e[0]){ap.appendChild(e[0])}}else{ap=avalon.parseHTML(dd)}}var di=cz.createComment("ms-html");if(dk){dj.insertBefore(di,df);var dc=dh.group,dg=1;while(dg<dc){var de=df.nextSibling;if(de){dj.removeChild(de);dg++}}dj.removeChild(df);dh.element=di}else{avalon.clearHTML(dj).appendChild(di)}if(dk){dh.group=ap.childNodes.length||1}e=avalon.slice(ap.childNodes);if(e[0]){if(di.parentNode){di.parentNode.replaceChild(ap,di)}if(dk){dh.element=e[0]}}aZ(e,dh.vmodels)};c2["if"]=c2.data=c2.text=c2.html=function(ap,e){cY(ap.value,e,ap)};aq["if"]=function(dd,ap,dc){if(dd){if(ap.nodeType===8){ap.parentNode.replaceChild(dc.template,ap);ap=dc.element=dc.template}if(ap.getAttribute(dc.name)){ap.removeAttribute(dc.name);aR(ap,dc.vmodels)}dc.rollback=null}else{if(ap.nodeType===1){var e=dc.element=cz.createComment("ms-if");ap.parentNode.replaceChild(e,ap);dc.template=ap;aG.appendChild(ap);dc.rollback=function(){if(ap.parentNode===aG){aG.removeChild(ap)}}}}};var bD=/\(([^)]*)\)/;c2.on=function(de,ap){var dd=de.value;de.type="on";var dc=de.param.replace(/-\d+$/,"");if(typeof c2.on[dc+"Hook"]==="function"){c2.on[dc+"Hook"](de)}if(dd.indexOf("(")>0&&dd.indexOf(")")>-1){var e=(dd.match(bD)||["",""])[1].trim();if(e===""||e==="$event"){dd=dd.replace(bD,"")}}cY(dd,ap,de)};aq.on=function(de,dc,dd){de=function(dg){var df=dd.evaluator||o;return df.apply(this,dd.args.concat(dg))};var ap=dd.param.replace(/-\d+$/,"");if(ap==="scan"){de.call(dc,{type:ap})}else{if(typeof dd.specialBind==="function"){dd.specialBind(dc,de)}else{var e=avalon.bind(dc,ap,de)}}dd.rollback=function(){if(typeof dd.specialUnbind==="function"){dd.specialUnbind()}else{avalon.unbind(dc,ap,e)}}};c2.repeat=function(dv,ds){var dg=dv.type;cY(dv.value,ds,dv,0,1);dv.proxies=[];var dj=false;try{var dp=dv.$repeat=dv.evaluator.apply(0,dv.args||[]);var dh=avalon.type(dp);if(dh!=="object"&&dh!=="array"){dj=true;avalon.log("warning:"+dv.value+"只能是对象或数组")}}catch(du){dj=true}var ap=dv.value.split(".")||[];if(ap.length>1){ap.pop();var dq=ap[0];for(var dr=0,dl;dl=ds[dr++];){if(dl&&dl.hasOwnProperty(dq)){var dk=dl[dq].$events||{};dk[cE]=dk[cE]||[];dk[cE].push(dv);break}}}var dt=dv.element;dt.removeAttribute(dv.name);dv.sortedCallback=a2(dt,"data-with-sorted",ds);dv.renderedCallback=a2(dt,"data-"+dg+"-rendered",ds);var dn=bF(dg);var dd=dv.element=cz.createComment(dn+":end");dv.clone=cz.createComment(dn);cn.appendChild(dd);if(dg==="each"||dg==="with"){dv.template=dt.innerHTML.trim();avalon.clearHTML(dt).appendChild(dd)}else{dv.template=dt.outerHTML.trim();dt.parentNode.replaceChild(dd,dt)}dv.template=avalon.parseHTML(dv.template);dv.rollback=function(){var dw=dv.element;if(!dw){return}aq.repeat.call(dv,"clear");var dx=dw.parentNode;var e=dv.template;var dz=e.firstChild;dx.replaceChild(e,dw);var dy=dv.$stamp;dy&&dy.parentNode&&dy.parentNode.removeChild(dy);dz=dv.element=dv.type==="repeat"?dz:dx};if(dj){return}dv.handler=aq.repeat;dv.$outer={};var de="$key";var df="$val";if(Array.isArray(dp)){de="$first";df="$last"}for(dr=0;dl=ds[dr++];){if(dl.hasOwnProperty(de)&&dl.hasOwnProperty(df)){dv.$outer=dl;break}}var di=dp.$events;var dc=(di||{})[cE];if(dc&&avalon.Array.ensure(dc,dv)){ad(dv,dc)}if(dh==="object"){dv.$with=true;var dm=!di?{}:di.$withProxyPool||(di.$withProxyPool={});dv.handler("append",dp,dm)}else{if(dp.length){dv.handler("add",0,dp.length)}}};aq.repeat=function(dl,di,dc){if(dl){var dB=this;var df=dB.element;var de=df.parentNode;var dk=dB.proxies;var dt=cn.cloneNode(false);switch(dl){case"add":var ds=di+dc;var dj=dB.$repeat;var dm=dj.length-1;var dD=[],dn;var dg=cZ(dB,di);for(var dv=di;dv<ds;dv++){var dw=a8(dv,dB);dk.splice(dv,0,dw);bN(dB,dt,dw,dD)}de.insertBefore(dt,dg);for(dv=0;dn=dD[dv++];){aZ(dn.nodes,dn.vmodels);dn.nodes=dn.vmodels=null}break;case"del":dg=dk[di].$stamp;df=cZ(dB,di+dc);cC(dg,df);var dx=dk.splice(di,dc);P(dx,"each");break;case"clear":var dz=dB.$stamp||dk[0];if(dz){dg=dz.$stamp||dz;cC(dg,df)}P(dk,"each");break;case"move":dg=dk[0].$stamp;var dr=dg.nodeValue;var dA=[];var dy=[],du;cC(dg,df,function(){dy.unshift(this);if(this.nodeValue===dr){dA.unshift(dy);dy=[]}});bk(dk,di);bk(dA,di);while(dy=dA.shift()){while(du=dy.shift()){dt.appendChild(du)}}de.insertBefore(dt,df);break;case"index":dm=dk.length-1;for(;dc=dk[di];di++){dc.$index=di;dc.$first=di===0;dc.$last=di===dm}return;case"set":dw=dk[di];if(dw){cK(dw.$events.$index)}return;case"append":var dq=dc;var dp=[];dD=[];for(var dC in di){if(di.hasOwnProperty(dC)&&dC!=="hasOwnProperty"){dp.push(dC)}}if(dB.sortedCallback){var ap=dB.sortedCallback.call(de,dp);if(ap&&Array.isArray(ap)&&ap.length){dp=ap}}for(dv=0;dC=dp[dv++];){if(dC!=="hasOwnProperty"){if(!dq[dC]){dq[dC]=bw(dC,dB)}bN(dB,dt,dq[dC],dD)}}var e=dB.$stamp=dB.clone;de.insertBefore(e,df);de.insertBefore(dt,df);for(dv=0;dn=dD[dv++];){aZ(dn.nodes,dn.vmodels);dn.nodes=dn.vmodels=null}break}if(dl==="clear"){dl="del"}var dh=dB.renderedCallback||o,dd=arguments;g(de,function(){dh.apply(de,dd);if(de.oldValue&&de.tagName==="SELECT"){avalon(de).val(de.oldValue.split(","))}},NaN)}};"with,each".replace(bU,function(e){c2[e]=c2.repeat});function bN(dh,dd,df,e){var dg=dh.template.cloneNode(true);var dc=avalon.slice(dg.childNodes);if(df.$stamp){dg.insertBefore(df.$stamp,dg.firstChild)}dd.appendChild(dg);var ap=[df].concat(dh.vmodels);var de={nodes:dc,vmodels:ap};e.push(de)}function cZ(ap,dc){var e=ap.proxies[dc];return e?e.$stamp:ap.element}function cC(dd,e,dc){while(true){var ap=e.previousSibling;if(!ap){break}ap.parentNode.removeChild(ap);dc&&dc.call(ap);if(ap===dd){break}}}var aV=[];var aF=[];function aL(dc){var ap={$host:[],$outer:{},$stamp:1,$index:0,$first:false,$last:false,$remove:avalon.noop};ap[dc]={get:function(){return this.$host[this.$index]},set:function(e){this.$host.set(this.$index,e)}};var de={$last:1,$first:1,$index:1};var dd=aC(ap,de);var df=dd.$events;df[dc]=df.$first=df.$last=df.$index;dd.$id=bF("$proxy$each");return dd}function a8(de,dd){var ap=dd.param||"el",df;for(var dc=0,e=aV.length;dc<e;dc++){var dh=aV[dc];if(dh&&dh.hasOwnProperty(ap)){df=dh;aV.splice(dc,1)}}if(!df){df=aL(ap)}var di=dd.$repeat;var dg=di.length-1;df.$index=de;df.$first=de===0;df.$last=de===dg;df.$host=di;df.$outer=dd.$outer;df.$stamp=dd.clone.cloneNode(false);df.$remove=function(){return di.removeAt(df.$index)};return df}function a7(){var e=aC({$key:"",$outer:{},$host:{},$val:{get:function(){return this.$host[this.$key]},set:function(ap){this.$host[this.$key]=ap}}},{$val:1});e.$id=bF("$proxy$with");return e}function bw(ap,dd){var e=aF.pop();if(!e){e=a7()}var dc=dd.$repeat;e.$key=ap;e.$host=dc;e.$outer=dd.$outer;if(dc.$events){e.$events.$val=dc.$events[ap]}else{e.$events={}}return e}function P(dc,e){var ap=e==="each"?aV:aF;avalon.each(dc,function(df,de){if(de.$events){for(var dd in de.$events){if(Array.isArray(de.$events[dd])){de.$events[dd].forEach(function(dg){if(typeof dg==="object"){bX(dg)}});de.$events[dd].length=0}}de.$host=de.$outer={};if(ap.unshift(de)>cq.maxRepeatSize){ap.pop()}}});if(e==="each"){dc.length=0}}aq.text=function(dd,ap){dd=dd==null?"":dd;if(ap.nodeType===3){try{ap.data=dd}catch(dc){}}else{if("textContent" in ap){ap.textContent=dd}else{ap.innerText=dd}}};function cg(dd,dc){var e="_"+dd;if(!cg[e]){var ap=cz.createElement(dd);cT.appendChild(ap);if(aW){dc=getComputedStyle(ap,null).display}else{dc=ap.currentStyle.display}cT.removeChild(ap);cg[e]=dc}return cg[e]}avalon.parseDisplay=cg;c2.visible=function(de,ap){var dd=avalon(de.element);var df=dd.css("display");if(df==="none"){var dc=dd[0].style;var e=/visibility/i.test(dc.cssText);var dg=dd.css("visibility");dc.display="";dc.visibility="hidden";df=dd.css("display");if(df==="none"){df=cg(dd[0].nodeName)}dc.visibility=e?dg:""}de.display=df;cY(de.value,ap,de)};aq.visible=function(dc,e,ap){e.style.display=dc?ap.display:"none"};c2.widget=function(dg,dc){var dj=dg.value.match(bU);var de=dg.element;var dd=dj[0];var ap=dj[1];if(!ap||ap==="$"){ap=bF(dd)}var dl=dj[2]||dd;var dh=avalon.ui[dd];if(typeof dh==="function"){dc=de.vmodels||dc;for(var df=0,dm;dm=dc[df++];){if(dm.hasOwnProperty(dl)&&typeof dm[dl]==="object"){var di=dm[dl];di=di.$model||di;break}}if(di){var dp=di[dd+"Id"];if(typeof dp==="string"){ap=dp}}var dn=avalon.getWidgetData(de,dd);dg.value=[dd,ap,dl].join(",");dg[dd+"Id"]=ap;dg.evaluator=o;de.msData["ms-widget-id"]=ap;var dk=dg[dd+"Options"]=avalon.mix({},dh.defaults,di||{},dn);de.removeAttribute("ms-widget");var e=dh(de,dg,dc)||{};if(e.$id){avalon.vmodels[ap]=e;V(de,e);if(e.hasOwnProperty("$init")){e.$init(function(){avalon.scan(de,[e].concat(dc));if(typeof dk.onInit==="function"){dk.onInit.call(de,e,dk,dc)}})}dg.rollback=function(){try{e.widgetElement=null;e.$remove()}catch(dq){}de.msData={};delete avalon.vmodels[e.$id]};ad(dg,bB);if(aQ.chrome){de.addEventListener("DOMNodeRemovedFromDocument",function(){setTimeout(at)})}}else{avalon.scan(de,dc)}}else{if(dc.length){de.vmodels=dc}}};var bB=[];var c6=/<script[^>]*>([\S\s]*?)<\/script\s*>/gim;var b5=/\s+(on[^=\s]+)(?:=("[^"]*"|'[^']*'|[^\s>]+))?/g;var a0=/<\w+\b(?:(["'])[^"]*?(\1)|[^>])*>/ig;var cN={a:/\b(href)\=("javascript[^"]*"|'javascript[^']*')/ig,img:/\b(src)\=("javascript[^"]*"|'javascript[^']*')/ig,form:/\b(action)\=("javascript[^"]*"|'javascript[^']*')/ig};var cs=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g;var be=/([^\#-~| |!])/g;function p(df,ap,dh,dg){df=(df+"").replace(/[^0-9+\-Ee.]/g,"");var dc=!isFinite(+df)?0:+df,e=!isFinite(+ap)?3:Math.abs(ap),dj=dg||",",de=dh||".",di="",dd=function(dm,dl){var dk=Math.pow(10,dl);return""+(Math.round(dm*dk)/dk).toFixed(dl)};di=(e?dd(dc,e):""+Math.round(dc)).split(".");if(di[0].length>3){di[0]=di[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,dj)}if((di[1]||"").length<e){di[1]=di[1]||"";di[1]+=new Array(e-di[1].length+1).join("0")}return di.join(de)}var bJ=avalon.filters={uppercase:function(e){return e.toUpperCase()},lowercase:function(e){return e.toLowerCase()},truncate:function(dc,e,ap){e=e||30;ap=ap===void (0)?"...":ap;return dc.length>e?dc.slice(0,e-ap.length)+ap:String(dc)},$filter:function(dd){for(var ap=1,df=arguments.length;ap<df;ap++){var de=arguments[ap];var dc=avalon.filters[de.shift()];if(typeof dc==="function"){var e=[dd].concat(de);dd=dc.apply(null,e)}}return dd},camelize:j,sanitize:function(e){return e.replace(c6,"").replace(a0,function(dc,ap){var dd=dc.toLowerCase().match(/<(\w+)\s/);if(dd){var de=cN[dd[1]];if(de){dc=dc.replace(de,function(dh,dg,di){var df=di.charAt(0);return dg+"="+df+"javascript:void(0)"+df})}}return dc.replace(b5," ").replace(/\s+/g," ")})},escape:function(e){return String(e).replace(/&/g,"&amp;").replace(cs,function(dd){var dc=dd.charCodeAt(0);var ap=dd.charCodeAt(1);return"&#"+(((dc-55296)*1024)+(ap-56320)+65536)+";"}).replace(be,function(ap){return"&#"+ap.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")},currency:function(ap,e,dc){return(e||"\uFFE5")+p(ap,isFinite(dc)?dc:2)},number:p};new function(){function dd(dk){return parseInt(dk,10)||0}function de(dm,dl,dk){var dn="";if(dm<0){dn="-";dm=-dm}dm=""+dm;while(dm.length<dl){dm="0"+dm}if(dk){dm=dm.substr(dm.length-dl)}return dn+dm}function di(dl,dm,dn,dk){return function(dp){var dq=dp["get"+dl]();if(dn>0||dq>-dn){dq+=dn}if(dq===0&&dn===-12){dq=12}return de(dq,dm,dk)}}function e(dk,dl){return function(dn,dq){var dp=dn["get"+dk]();var dm=(dl?("SHORT"+dk):dk).toUpperCase();return dq[dm][dp]}}function dj(dl){var dk=-1*dl.getTimezoneOffset();var dm=(dk>=0)?"+":"";dm+=de(Math[dk>0?"floor":"ceil"](dk/60),2)+de(Math.abs(dk%60),2);return dm}function dh(dk,dl){return dk.getHours()<12?dl.AMPMS[0]:dl.AMPMS[1]}var dg={yyyy:di("FullYear",4),yy:di("FullYear",2,0,true),y:di("FullYear",1),MMMM:e("Month"),MMM:e("Month",true),MM:di("Month",2,1),M:di("Month",1,1),dd:di("Date",2),d:di("Date",1),HH:di("Hours",2),H:di("Hours",1),hh:di("Hours",2,-12),h:di("Hours",1,-12),mm:di("Minutes",2),m:di("Minutes",1),ss:di("Seconds",2),s:di("Seconds",1),sss:di("Milliseconds",3),EEEE:e("Day"),EEE:e("Day",true),a:dh,Z:dj};var ap=/((?:[^yMdHhmsaZE']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|d+|H+|h+|m+|s+|a|Z))(.*)/;var dc=/^\/Date\((\d+)\)\/$/;bJ.date=function(dl,dx){var dt=bJ.date.locate,dw="",dn=[],du,dp;dx=dx||"mediumDate";dx=dt[dx]||dx;if(typeof dl==="string"){if(/^\d+$/.test(dl)){dl=dd(dl)}else{if(dc.test(dl)){dl=+RegExp.$1}else{var dm=dl.trim();var ds=[0,0,0,0,0,0,0];var dy=new Date(0);dm=dm.replace(/^(\d+)\D(\d+)\D(\d+)/,function(dB,dA,dz,dD){var dC=dD.length===4?[dD,dA,dz]:[dA,dz,dD];ds[0]=dd(dC[0]);ds[1]=dd(dC[1])-1;ds[2]=dd(dC[2]);return""});var dr=dy.setFullYear;var dv=dy.setHours;dm=dm.replace(/[T\s](\d+):(\d+):?(\d+)?\.?(\d)?/,function(dB,dA,dz,dD,dC){ds[3]=dd(dA);ds[4]=dd(dz);ds[5]=dd(dD);if(dC){ds[6]=Math.round(parseFloat("0."+dC)*1000)}return""});var dk=0;var dq=0;dm=dm.replace(/Z|([+-])(\d\d):?(\d\d)/,function(dB,dz,dC,dA){dr=dy.setUTCFullYear;dv=dy.setUTCHours;if(dz){dk=dd(dz+dC);dq=dd(dz+dA)}return""});ds[3]-=dk;ds[4]-=dq;dr.apply(dy,ds.slice(0,3));dv.apply(dy,ds.slice(3));dl=dy}}}if(typeof dl==="number"){dl=new Date(dl)}if(avalon.type(dl)!=="date"){return}while(dx){dp=ap.exec(dx);if(dp){dn=dn.concat(dp.slice(1));dx=dn.pop()}else{dn.push(dx);dx=null}}dn.forEach(function(dz){du=dg[dz];dw+=du?du(dl,dt):dz.replace(/(^'|'$)/g,"").replace(/''/g,"'")});return dw};var df={AMPMS:{0:"上午",1:"下午"},DAY:{0:"星期日",1:"星期一",2:"星期二",3:"星期三",4:"星期四",5:"星期五",6:"星期六"},MONTH:{0:"1月",1:"2月",2:"3月",3:"4月",4:"5月",5:"6月",6:"7月",7:"8月",8:"9月",9:"10月",10:"11月",11:"12月"},SHORTDAY:{"0":"周日","1":"周一","2":"周二","3":"周三","4":"周四","5":"周五","6":"周六"},fullDate:"y年M月d日EEEE",longDate:"y年M月d日",medium:"yyyy-M-d H:mm:ss",mediumDate:"yyyy-M-d",mediumTime:"H:mm:ss","short":"yy-M-d ah:mm",shortDate:"yy-M-d",shortTime:"ah:mm"};df.SHORTMONTH=df.MONTH;bJ.date.locate=df};var cG=avalon.modules={"domReady!":{exports:avalon,state:3},avalon:{exports:avalon,state:4}};cG.exports=cG.avalon;new function(){var dL=[];var dg=[];var e=/\.js$/i;function dD(dN,dP){var dO="js";dN=dN.replace(/^(\w+)\!/,function(dV,dU){dO=dU;return""});if(dO==="ready"){ct("debug: ready!已经被废弃，请使用domReady!");dO="domReady"}var dS="";dN=dN.replace(df,function(dU){dS=dU;return""});var dT="."+dO;var dQ=/js|css/.test(dT)?dT:"";dN=dN.replace(/\.[a-z0-9]+$/g,function(dU){if(dU===dT){dQ=dU;return""}else{return dU}});var dR=avalon.mix({query:dS,ext:dQ,res:dO,name:dN,toUrl:dw},dP);dR.toUrl(dN);return dR}function dH(dS){var dP=dS.name;var dQ=dS.res;var dO=cG[dP];var dN=dP&&dS.urlNoQuery;if(dO&&dO.state>=1){return dP}dO=cG[dN];if(dO&&dO.state>=3){r(dO.deps||[],dO.factory,dN);return dN}if(dP&&!dO){dO=cG[dN]={id:dN,state:1};var dR=function(dT){dF[dQ]=dT;dT.load(dP,dS,function(dU){if(arguments.length&&dU!==void 0){dO.exports=dU}dO.state=4;dI()})};if(!dF[dQ]){r([dQ],dR)}else{dR(dF[dQ])}}return dP?dN:dQ+"!"}var ds=[];var dl=false;r=avalon.require=function(dT,dQ,dN,dY){if(!dl){ds.push(avalon.slice(arguments));if(arguments.length<=2){dl=true;var dR=ds.splice(0,ds.length),dU;while(dU=dR.shift()){r.apply(null,dU)}}return}if(!Array.isArray(dT)){avalon.error("require方法的第一个参数应为数组 "+dT)}var dW=[];var dX={};var dP=dN||"callback"+setTimeout("1");dY=dY||{};dY.baseUrl=cq.baseUrl;var dO=!!dY.built;if(dN){dY.parentUrl=dN.substr(0,dN.lastIndexOf("/"));dY.mapUrl=dN.replace(e,"")}if(dO){var dV=dD(dY.defineName,dY);dP=dV.urlNoQuery}else{dT.forEach(function(d0){var d1=dD(d0,dY);var dZ=dH(d1);if(dZ){if(!dX[dZ]){dW.push(dZ);dX[dZ]="司徒正美"}}})}var dS=cG[dP];if(!dS||dS.state!==4){cG[dP]={id:dP,deps:dO?dT.concat():dW,factory:dQ||o,state:3}}if(!dS){dL.push(dP)}dI()};r.define=function(dQ,dT,dS){if(typeof dQ!=="string"){dS=dT;dT=dQ;dQ="anonymous"}if(!Array.isArray(dT)){dS=dT;dT=[]}var dR={built:!dl,defineName:dQ};var dP=[dT,dS,dR];dS.require=function(dU){dP.splice(2,0,dU);if(cG[dU]){cG[dU].state=3;var dV=false;try{dV=dc(cG[dU].deps,dU)}catch(dW){}if(dV){avalon.error(dU+"模块与之前的模块存在循环依赖，请不要直接用script标签引入"+dU+"模块")}}delete dS.require;r.apply(null,dP)};var dO=dR.built?"unknown":dj();if(dO){var dN=cG[dO];if(dN){dN.state=2}dS.require(dO)}else{dg.push(dS)}};r.config=cq;r.define.amd=cG;var dd=cq["orig.paths"]={};var dG=cq["orig.map"]={};var di=cq.packages=[];var dE=cq["orig.args"]={};avalon.mix(w,{paths:function(dN){avalon.mix(dd,dN);cq.paths=de(dd)},map:function(dO){avalon.mix(dG,dO);var dN=de(dG,1,1);avalon.each(dN,function(dP,dQ){dQ.val=de(dQ.val)});cq.map=dN},packages:function(dT){dT=dT.concat(di);var dS={};var dQ=[];for(var dR=0,dP;dP=dT[dR++];){dP=typeof dP==="string"?{name:dP}:dP;var dO=dP.name;if(!dS[dO]){var dN=dP.location?dP.location:dv(dO,dP.main||"main");dN=dN.replace(e,"");dQ.push(dP);dS[dO]=dP.location=dN;dP.reg=ap(dO)}}cq.packages=dQ.sort()},urlArgs:function(dN){if(typeof dN==="string"){dN={"*":dN}}avalon.mix(dE,dN);cq.urlArgs=de(dE,1)},baseUrl:function(dN){if(!dB(dN)){var dO=b.getElementsByTagName("base")[0];if(dO){b.removeChild(dO)}var dP=cz.createElement("a");dP.href=dN;dN=dy(dP,"href");if(dO){b.insertBefore(dO,b.firstChild)}}if(dN.length>3){cq.baseUrl=dN}},shim:function(dP){for(var dN in dP){var dO=dP[dN];if(Array.isArray(dO)){dO=dP[dN]={deps:dO}}if(!dO.exportsFn&&(dO.exports||dO.init)){dO.exportsFn=dM(dO)}}cq.shim=dP}});function dc(dP,dN){for(var dO=0,dQ;dQ=dP[dO++];){if(cG[dQ].state!==4&&(dQ===dN||dc(cG[dQ].deps,dN))){return true}}}function dp(dO,dN,dQ){var dP=dm(dO.src);dO.onload=dO.onreadystatechange=dO.onerror=null;if(dN||(dQ&&cG[dP]&&!cG[dP].state)){setTimeout(function(){b.removeChild(dO);dO=null});ct("debug: 加载 "+dP+" 失败"+dN+" "+(!cG[dP].state))}else{return true}}function dI(){loop:for(var dP=dL.length,dS;dS=dL[--dP];){var dQ=cG[dS],dR=dQ.deps;if(!dR){continue}for(var dN=0,dO;dO=dR[dN];dN++){if(Object(cG[dO]).state!==4){continue loop}}if(dQ.state!==4){dL.splice(dP,1);dA(dQ.id,dQ.deps,dQ.factory);dI()}}}var dr=cz.documentMode>=8?/loaded/:/complete|loaded/;function dk(dO,dU,dQ){var dP=cz.createElement("script");dP.className=cE;var dN;var dT="onload" in dP;var dR=dT?"onload":"onreadystatechange";function dS(){if(!"1"[0]&&!dN){return dN=setTimeout(dS,150)}if(dT||dr.test(dP.readyState)){clearTimeout(dN);var dV=dg.pop();dV&&dV.require(dU);if(dQ){dQ()}if(dp(dP,false,!dT)){ct("debug: 已成功加载 "+dO);dU&&dL.push(dU);dI()}}}dP[dR]=dS;dP.onerror=function(){dp(dP,true)};b.insertBefore(dP,b.firstChild);dP.src=dO;ct("debug: 正准备加载 "+dO)}var dF=r.plugins={ready:{load:o},js:{load:function(dP,dQ,dN){var dO=dQ.url;var dS=dQ.urlNoQuery;var dR=cq.shim[dP.replace(e,"")];if(dR){r(dR.deps||[],function(){var dT=avalon.slice(arguments);dk(dO,dS,function(){dN(dR.exportsFn?dR.exportsFn.apply(0,dT):void 0)})})}else{dk(dO,dS)}}},css:{load:function(dP,dR,dN){var dO=dR.url;var dQ=cz.createElement("link");dQ.rel="stylesheet";dQ.href=dO;b.insertBefore(dQ,b.firstChild);ct("debug: 已成功加载 "+dO);dN()}},text:{load:function(dP,dQ,dN){var dO=dQ.url;var dR=cj();dR.onreadystatechange=function(){if(dR.readyState===4){var dS=dR.status;if(dS>399&&dS<600){avalon.error(dO+" 对应资源不存在或没有开启 CORS")}else{ct("debug: 已成功加载 "+dO);dN(dR.responseText)}}};dR.open("GET",dO,true);if("withCredentials" in dR){dR.withCredentials=true}dR.setRequestHeader("X-Requested-With","XMLHttpRequest");dR.send();ct("debug: 正准备加载 "+dO)}}};r.checkDeps=dI;var df=/(\?[^#]*)$/;function dm(dN){return(dN||"").replace(df,"")}function dB(dN){return/^(?:[a-z]+:)?\/\//i.test(String(dN))}function dy(dN,dO){return"1"[0]?dN[dO]:dN.getAttribute(dO,4)}function dj(){var dN;try{a.b.c()}catch(dS){dN=dS.stack;if(!dN&&aQ.opera){dN=(String(dS).match(/of linked script \S+/g)||[]).join(" ")}}if(dN){dN=dN.split(/[@ ]/g).pop();dN=dN[0]==="("?dN.slice(1,-1):dN.replace(/\s/,"");return dm(dN.replace(/(:\d+)?:\d+$/i,""))}var dO=b.getElementsByTagName("script");for(var dQ=dO.length,dR;dR=dO[--dQ];){if(dR.className===cE&&dR.readyState==="interactive"){var dP=dy(dR,"src");return dR.className=dm(dP)}}}var dz=/^callback\d+$/;function dA(dN,dW,dO){var dR=Object(cG[dN]);dR.state=4;for(var dP=0,dU=[],dV;dV=dW[dP++];){if(dV==="exports"){var dQ=dR.exports||(dR.exports={});dU.push(dQ)}else{dU.push(cG[dV].exports)}}try{var dT=dO.apply(aQ,dU)}catch(dS){ct("执行["+dN+"]模块的factory抛错： "+dS)}if(dT!==void 0){dR.exports=dT}if(dz.test(dN)){delete cG[dN]}delete dR.factory;return dT}function dw(dT){if(dT.indexOf(this.res+"!")===0){dT=dT.slice(this.res.length+1)}var dQ=dT;var dR=0;var dN=this.baseUrl;var dP=this.parentUrl||dN;du(dT,cq.paths,function(dV,dU){dQ=dQ.replace(dU,dV);dR=1});if(!dR){du(dT,cq.packages,function(dW,dU,dV){dQ=dQ.replace(dV.name,dV.location)})}if(this.mapUrl){du(this.mapUrl,cq.map,function(dU){du(dQ,dU,function(dW,dV){dQ=dQ.replace(dV,dW);dP=dN})})}var dS=this.ext;if(dS&&dR&&dQ.slice(-dS.length)===dS){dQ=dQ.slice(0,-dS.length)}if(!dB(dQ)){dP=this.built||/^\w/.test(dQ)?dN:dP;dQ=dv(dP,dQ)}var dO=dQ+dS;dQ=dO+this.query;du(dT,cq.urlArgs,function(dU){dQ+=(dQ.indexOf("?")===-1?"?":"&")+dU});this.url=dQ;return this.urlNoQuery=dO}function de(dQ,dP,dO){var dN=dJ(dQ,dP,dO);dN.sort(dC);return dN}function ap(dN){return new RegExp("^"+dN+"(/|$)")}function dM(dN){return function(){var dO;if(dN.init){dO=dN.init.apply(aQ,arguments)}return dO||(dN.exports&&dt(dN.exports))}}function dJ(dR,dP,dN){var dS=[];for(var dO in dR){if(aN.call(dR,dO)){var dQ={name:dO,val:dR[dO]};dS.push(dQ);dQ.reg=dO==="*"&&dP?/^/:ap(dO);if(dN&&dO!=="*"){dQ.reg=new RegExp("/"+dO.replace(/^\//,"")+"(/|$)")}}}return dS}function du(dN,dR,dQ){dR=dR||[];for(var dO=0,dP;dP=dR[dO++];){if(dP.reg.test(dN)){dQ(dP.val,dP.name,dP);return false}}}function dC(dO,dN){var dQ=dO.name;var dP=dN.name;if(dP==="*"){return -1}if(dQ==="*"){return 1}return dP.length-dQ.length}var dK=/\/\w+\/\.\./;function dv(dO,dN){if(dO.charAt(dO.length-1)!=="/"){dO+="/"}if(dN.slice(0,2)==="./"){return dO+dN.slice(2)}if(dN.slice(0,2)===".."){dO+=dN;while(dK.test(dO)){dO=dO.replace(dK,"")}return dO}if(dN.slice(0,1)==="/"){return dO+dN.slice(1)}return dO+dN}function dt(dO){if(!dO){return dO}var dN=aQ;dO.split(".").forEach(function(dP){dN=dN[dP]});return dN}var dx=cz.scripts[cz.scripts.length-1];var dh=dx.getAttribute("data-main");if(dh){w.baseUrl(dh);var dn=cq.baseUrl;cq.baseUrl=dn.slice(0,dn.lastIndexOf("/")+1);dk(dn.replace(e,"")+".js")}else{var dq=dm(dy(dx,"src"));cq.baseUrl=dq.slice(0,dq.lastIndexOf("/")+1)}};var b8=[],an;var cy=function(e){an=true;if(r){cG["domReady!"].state=4;r.checkDeps()}while(e=b8.shift()){e(avalon)}};function bM(){try{cT.doScroll("left");cy()}catch(ap){setTimeout(bM)}}if(cz.readyState==="complete"){setTimeout(cy)}else{if(aW){cz.addEventListener("DOMContentLoaded",cy)}else{cz.attachEvent("onreadystatechange",function(){if(cz.readyState==="complete"){cy()}});try{var al=aQ.frameElement===null}catch(ck){}if(cT.doScroll&&al&&aQ.external){bM()}}}avalon.bind(aQ,"load",cy);avalon.ready=function(e){if(!an){b8.push(e)}else{e(avalon)}};avalon.config({loader:true});avalon.ready(function(){avalon.scan(cz.body)});if(typeof define==="function"&&define.amd){define("avalon",[],function(){return avalon})}var aH=aQ.avalon;avalon.noConflict=function(e){if(e&&aQ.avalon===avalon){aQ.avalon=aH}return avalon};if(a6===void 0){aQ.avalon=avalon}return avalon}));(function(i){function n(p){return p}function e(p){throw p}function h(p){return this.then(p,e)}function d(p){return this.then(n,p)}function b(){var p={};p.promise=new this(function(r,q){p.resolve=r;p.reject=q});return p}var f=function(q){this._callbacks=[];var p=this;if(typeof this!=="object"){throw new TypeError("Promises must be constructed via new")}if(typeof q!=="function"){throw new TypeError("not a function")}q(function(r){o(p,r)},function(r){j(p,r)})};function l(r,p){if(typeof r.async==="boolean"){var q=r.async}else{q=r.async=true}if(q){window.setTimeout(p,0)}else{p()}}f.resolve=function(p){return new f(function(q){q(p)})};f.reject=function(p){return new f(function(r,q){q(p)})};f.prototype={constructor:f,_state:"pending",_fired:false,_fire:function(q,p){if(this._state==="rejected"){if(typeof p==="function"){p(this._value)}else{throw this._value}}else{if(typeof q==="function"){q(this._value)}}},_then:function(r,q){if(this._fired){var p=this;l(p,function(){p._fire(r,q)})}else{this._callbacks.push({onSuccess:r,onFail:q})}},then:function(t,s){t=typeof t==="function"?t:n;s=typeof s==="function"?s:e;var r=this;var p=new f(function(v,u){r._then(function(w){try{w=t(w)}catch(x){u(x);return}v(w)},function(w){try{w=s(w)}catch(x){u(x);return}v(w)})});for(var q in r){if(!c[q]){p[q]=r[q]}}return p},done:h,"catch":d,fail:d};var c={_state:1,_fired:1,_value:1,_callbacks:1};function o(r,p){if(r._state!=="pending"){return}if(p&&typeof p.then==="function"){var q=p instanceof f?"_then":"then";p[q](function(s){g(r,s,true)},function(s){g(r,s,false)})}else{g(r,p,true)}}function j(q,p){if(q._state!=="pending"){return}g(q,p,false)}function g(r,p,q){r._fired=true;r._value=p;r._state=q?"fulfilled":"rejected";l(r,function(){r._callbacks.forEach(function(s){r._fire(s.onSuccess,s.onFail)})})}function k(s,r){r=Array.isArray(r)?r:[];var t=0,q=[],p;return new f(function(y,u){if(!r.length){y()}function w(z,A){z.then(function(B){if(!p){q[A]=B;t++;if(s||t>=r.length){y(s?B:q);p=true}}},function(B){p=true;u(B)})}for(var x=0,v=r.length;x<v;x++){w(r[x],x)}})}f.all=function(p){return k(false,p)};f.race=function(p){return k(true,p)};f.defer=b;i.Promise=f;var m=window.Promise;if(/native code/.test(m)){m.prototype.done=h;m.prototype.fail=d;if(!m.defer){m.defer=b}}return window.Promise=m||f})(avalon);(function(avalon){var global=this||(0,eval)("this");var DOC=global.document;var encode=encodeURIComponent;var decode=decodeURIComponent;var rlocalProtocol=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/;var rheaders=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg;var rnoContent=/^(?:GET|HEAD)$/;var rprotocol=/^\/\//;var rhash=/#.*$/;var rquery=/\?/;var rjsonp=/(=)\?(?=&|$)|\?\?/;var r20=/%20/g;var originAnchor=document.createElement("a");originAnchor.href=location.href;var accepts={xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript",script:"text/javascript, application/javascript","*":["*/"]+["*"]};function IE(){if(window.VBArray){var mode=document.documentMode;return mode?mode:window.XMLHttpRequest?7:6}else{return 0}}var useOnload=IE()===0||IE()>8;function parseJS(code){var indirect=eval;code=code.trim();if(code){if(code.indexOf("use strict")===1){var script=document.createElement("script");script.text=code;head.appendChild(script).parentNode.removeChild(script)}else{indirect(code)}}}if(!String.prototype.startsWith){String.prototype.startsWith=function(searchString,position){position=position||0;return this.lastIndexOf(searchString,position)===position}}var head=DOC.getElementsByTagName("head")[0];var isLocal=false;try{isLocal=rlocalProtocol.test(location.protocol)}catch(e){}new function(){var s=["XMLHttpRequest","ActiveXObject('MSXML2.XMLHTTP.6.0')","ActiveXObject('MSXML2.XMLHTTP.3.0')","ActiveXObject('MSXML2.XMLHTTP')","ActiveXObject('Microsoft.XMLHTTP')"];s[0]=IE()<8&&IE()!==0&&isLocal?"!":s[0];for(var i=0,axo;axo=s[i++];){try{if(eval("new "+axo)){avalon.xhr=new Function("return new "+axo);break}}catch(e){}}};var supportCors="withCredentials" in avalon.xhr();function parseXML(data,xml,tmp){try{var mode=document.documentMode;if(window.DOMParser&&(!mode||mode>8)){tmp=new DOMParser();xml=tmp.parseFromString(data,"text/xml")}else{xml=new ActiveXObject("Microsoft.XMLDOM");xml.async="false";xml.loadXML(data)}}catch(e){xml=void 0}if(!xml||!xml.documentElement||xml.getElementsByTagName("parsererror").length){avalon.error("Invalid XML: "+data)}return xml}var defaults={type:"GET",contentType:"application/x-www-form-urlencoded; charset=UTF-8",async:true,jsonp:"callback"};function ajaxExtend(opts){opts=avalon.mix({},defaults,opts);opts.type=opts.type.toUpperCase();var querystring=typeof opts.data==="string"?opts.data:avalon.param(opts.data);opts.querystring=querystring||"";opts.url=opts.url.replace(rhash,"").replace(rprotocol,location.protocol+"//");if(typeof opts.crossDomain!=="boolean"){var urlAnchor=document.createElement("a");try{urlAnchor.href=opts.url;var absUrl=!"1"[0]?urlAnchor.getAttribute("href",4):urlAnchor.href;urlAnchor.href=absUrl;opts.crossDomain=originAnchor.protocol+"//"+originAnchor.host!==urlAnchor.protocol+"//"+urlAnchor.host}catch(e){opts.crossDomain=true}}opts.hasContent=!rnoContent.test(opts.type);if(!opts.hasContent){if(querystring){opts.url+=(rquery.test(opts.url)?"&":"?")+querystring}if(opts.cache===false){opts.url+=(rquery.test(opts.url)?"&":"?")+"_time="+(new Date()-0)}}return opts}var XHRMethods={setRequestHeader:function(name,value){this.requestHeaders[name]=value;return this},getAllResponseHeaders:function(){return this.readyState===4?this.responseHeadersString:null},getResponseHeader:function(name,match){if(this.readyState===4){while((match=rheaders.exec(this.responseHeadersString))){this.responseHeaders[match[1]]=match[2]}match=this.responseHeaders[name]}return match===undefined?null:match},overrideMimeType:function(type){this.mimeType=type;return this},abort:function(statusText){statusText=statusText||"abort";if(this.transport){this.respond(0,statusText)}return this},dispatch:function(status,nativeStatusText){var statusText=nativeStatusText;if(!this.transport){return}this.readyState=4;var isSuccess=status>=200&&status<300||status===304;if(isSuccess){if(status===204){statusText="nocontent"}else{if(status===304){statusText="notmodified"}else{if(typeof this.response==="undefined"){var dataType=this.options.dataType||this.options.mimeType;if(!dataType&&this.responseText||this.responseXML){dataType=this.getResponseHeader("Content-Type")||"";dataType=dataType.match(/json|xml|script|html/)||["text"];dataType=dataType[0]}var responseText=this.responseText||"",responseXML=this.responseXML||"";try{this.response=avalon.ajaxConverters[dataType].call(this,responseText,responseXML)}catch(e){isSuccess=false;this.error=e;statusText="parsererror"}}}}}this.status=status;this.statusText=statusText+"";if(this.timeoutID){clearTimeout(this.timeoutID);delete this.timeoutID}this._transport=this.transport;var that=this;if(isSuccess){this._resolve([this.response,statusText,this]);window.setTimeout(function(){avalon.ajaxGlobalEvents.success(that,that.options,that.response)},0)}else{this._reject([this,statusText,this.error]);window.setTimeout(function(){avalon.ajaxGlobalEvents.error(that,that.options,statusText)},0)}delete this.transport;ajaxActive--;window.setTimeout(function(){avalon.ajaxGlobalEvents.complete(that,that.options)},0);if(ajaxActive===0){window.setTimeout(function(){avalon.ajaxGlobalEvents.stop()},0)}}};var ajaxActive=0;avalon.ajax=function(opts,promise){if(!opts||!opts.url){avalon.error("参数必须为Object并且拥有url属性")}opts=ajaxExtend(opts);var XHRProperties={responseHeadersString:"",responseHeaders:{},requestHeaders:{},querystring:opts.querystring,readyState:0,uniqueID:(""+Math.random()).replace(/0\./,""),status:0};var _reject,_resolve;var promise=new avalon.Promise(function(resolve,reject){_resolve=resolve;_reject=reject});promise.options=opts;promise._reject=_reject;promise._resolve=_resolve;var doneList=[],failList=[];Array("done","fail","always").forEach(function(method){promise[method]=function(fn){if(typeof fn==="function"){if(method!=="fail"){doneList.push(fn)}if(method!=="done"){failList.push(fn)}}return this}});var isSync=opts.async===false;if(isSync){avalon.log("warnning:与jquery1.8一样,async:false这配置已经被废弃");promise.async=false}avalon.mix(promise,XHRProperties,XHRMethods);promise.then(function(value){value=Array.isArray(value)?value:value===void 0?[]:[value];for(var i=0,fn;fn=doneList[i++];){fn.apply(promise,value)}return value},function(value){value=Array.isArray(value)?value:value===void 0?[]:[value];for(var i=0,fn;fn=failList[i++];){fn.apply(promise,value)}return value});promise.done(opts.success).fail(opts.error).always(opts.complete);var dataType=opts.dataType;var transports=avalon.ajaxTransports;if((opts.crossDomain&&!supportCors||rjsonp.test(opts.url))&&dataType==="json"&&opts.type==="GET"){dataType=opts.dataType="jsonp"}var name=opts.form?"upload":dataType;var transport=transports[name]||transports.xhr;avalon.mix(promise,transport);if(promise.preproccess){dataType=promise.preproccess()||dataType}if(opts.contentType){promise.setRequestHeader("Content-Type",opts.contentType)}if(opts.beforeSend&&avalon.isFunction(opts.beforeSend)){opts.beforeSend(promise)}promise.setRequestHeader("Accept",accepts[dataType]?accepts[dataType]+", */*; q=0.01":accepts["*"]);for(var i in opts.headers){promise.setRequestHeader(i,opts.headers[i])}if(opts.async&&opts.timeout>0){promise.timeoutID=setTimeout(function(){promise.abort("timeout");promise.dispatch(0,"timeout")},opts.timeout)}if(ajaxActive===0){avalon.ajaxGlobalEvents.start()}avalon.ajaxGlobalEvents.send(promise,opts);ajaxActive++;promise.request();return promise};"get,post".replace(avalon.rword,function(method){avalon[method]=function(url,data,callback,type){if(typeof data==="function"){type=type||callback;callback=data;data=void 0}return avalon.ajax({type:method,url:url,data:data,success:callback,dataType:type})}});function ok(val){return val}function ng(e){throw e}avalon.getScript=function(url,callback){return avalon.get(url,null,callback,"script")};avalon.getJSON=function(url,data,callback){return avalon.get(url,data,callback,"json")};avalon.upload=function(url,form,data,callback,dataType){if(typeof data==="function"){dataType=callback;callback=data;data=void 0}return avalon.ajax({url:url,type:"post",dataType:dataType,form:form,data:data,success:callback})};avalon.ajaxGlobalEvents={};["start","stop","complete","error","success","send"].forEach(function(method){avalon.ajaxGlobalEvents[method]=avalon.noop});avalon.ajaxConverters={text:function(text){return text},xml:function(text,xml){return xml!==void 0?xml:parseXML(text)},html:function(text){return avalon.parseHTML(text)},json:function(text){if(!avalon.parseJSON){avalon.log("avalon.parseJSON不存在,请升级到最新版")}return avalon.parseJSON(text)},script:function(text){parseJS(text);return text},jsonp:function(){var json,callbackName;if(this.jsonpCallback.startsWith("avalon.")){callbackName=this.jsonpCallback.replace(/avalon\./,"");json=avalon[callbackName];delete avalon[callbackName]}else{json=window[this.jsonpCallback]}return json}};avalon.param=function(a){var prefix,s=[],add=function(key,value){value=(value==null?"":value);s[s.length]=encode(key)+"="+encode(value)};if(Array.isArray(a)||!avalon.isPlainObject(a)){avalon.each(a,function(subKey,subVal){add(subKey,subVal)})}else{for(prefix in a){paramInner(prefix,a[prefix],add)}}return s.join("&").replace(r20,"+")};function paramInner(prefix,obj,add){var name;if(Array.isArray(obj)){avalon.each(obj,function(i,v){paramInner(prefix+"["+(typeof v==="object"?i:"")+"]",v,add)})}else{if(avalon.isPlainObject(obj)){for(name in obj){paramInner(prefix+"["+name+"]",obj[name],add)}}else{add(prefix,obj)}}}avalon.unparam=function(input){var items,temp,expBrackets=/\[(.*?)\]/g,expVarname=/(.+?)\[/,result={};if((temp=avalon.type(input))!="string"||(temp=="string"&&!temp.length)){return{}}if(input.indexOf("?")!==-1){input=input.split("?").pop()}items=decode(input).split("&");if(!(temp=items.length)||(temp==1&&temp==="")){return result}items.forEach(function(item){if(!item.length){return}temp=item.split("=");var key=temp.shift(),value=temp.join("=").replace(/\+/g," "),size,link,subitems=[];if(!key.length){return}while((temp=expBrackets.exec(key))){subitems.push(temp[1])}if(!(size=subitems.length)){result[key]=value;return}size--;temp=expVarname.exec(key);if(!temp||!(key=temp[1])||!key.length){return}if(avalon.type(result[key])!=="object"){result[key]={}}link=result[key];avalon.each(subitems,function(subindex,subitem){if(!(temp=subitem).length){temp=0;avalon.each(link,function(num){if(!isNaN(num)&&num>=0&&(num%1===0)&&num>=temp){temp=Number(num)+1}})}if(subindex==size){link[temp]=value}else{if(avalon.type(link[temp])!=="object"){link=link[temp]={}}else{link=link[temp]}}})});return result};var rinput=/select|input|button|textarea/i;var rcheckbox=/radio|checkbox/;var rline=/\r?\n/g;function trimLine(val){return val.replace(rline,"\r\n")}avalon.serialize=function(form){var json={};Array.prototype.filter.call(form.getElementsByTagName("*"),function(el){if(rinput.test(el.nodeName)&&el.name&&!el.disabled){return rcheckbox.test(el.type)?el.checked:true}}).forEach(function(el){var val=avalon(el).val();val=Array.isArray(val)?val.map(trimLine):trimLine(val);var name=el.name;if(name in json){if(Array.isArray(val)){json[name].push(val)}else{json[name]=[json[name],val]}}else{json[name]=val}});return avalon.param(json,false)};var transports=avalon.ajaxTransports={xhr:{request:function(){var self=this;var opts=this.options;var transport=this.transport=new avalon.xhr;transport.open(opts.type,opts.url,opts.async,opts.username,opts.password);if(this.mimeType&&transport.overrideMimeType){transport.overrideMimeType(this.mimeType)}if(opts.crossDomain&&"withCredentials" in transport){transport.withCredentials=true}if(!opts.crossDomain){this.requestHeaders["X-Requested-With"]="XMLHttpRequest"}for(var i in this.requestHeaders){transport.setRequestHeader(i,this.requestHeaders[i]+"")}if(opts.progressCallback){var isOldIE=document.all&&!window.atob;if(!isOldIE){transport.upload.onprogress=opts.progressCallback}}var dataType=opts.dataType;if("responseType" in transport&&/^(blob|arraybuffer|text)$/.test(dataType)){transport.responseType=dataType;this.useResponseType=true}transport.send(opts.hasContent&&(this.formdata||this.querystring)||null);if(!opts.async||transport.readyState===4){this.respond()}else{if(useOnload){transport.onload=transport.onerror=function(e){this.readyState=4;this.status=e.type==="load"?200:500;self.respond()}}else{transport.onreadystatechange=function(){self.respond()}}}},respond:function(event,forceAbort){var transport=this.transport;if(!transport){return}if(forceAbort&&this.timeoutID){clearTimeout(this.timeoutID);delete this.timeoutID}try{var completed=transport.readyState===4;if(forceAbort||completed){transport.onreadystatechange=avalon.noop;if(useOnload){transport.onerror=transport.onload=null}if(forceAbort){if(!completed&&typeof transport.abort==="function"){transport.abort()}}else{var status=transport.status;var text=transport.responseText;this.responseText=typeof text==="string"?text:void 0;try{var xml=transport.responseXML;this.responseXML=xml.documentElement}catch(e){}if(this.useResponseType){this.response=transport.response}this.responseHeadersString=transport.getAllResponseHeaders();try{var statusText=transport.statusText}catch(e){this.error=e;statusText="firefoxAccessError"}if(!status&&isLocal&&!this.options.crossDomain){status=this.responseText?200:404}else{if(status===1223){status=204}}this.dispatch(status,statusText)}}}catch(err){if(!forceAbort){this.dispatch(500,err)}}}},jsonp:{preproccess:function(){var opts=this.options;var name=this.jsonpCallback=opts.jsonpCallback||"avalon.jsonp"+setTimeout("1");if(rjsonp.test(opts.url)){opts.url=opts.url.replace(rjsonp,"$1"+name)}else{opts.url=opts.url+(rquery.test(opts.url)?"&":"?")+opts.jsonp+"="+name}if(name.startsWith("avalon.")){name=name.replace(/avalon\./,"");avalon[name]=function(json){avalon[name]=json}}else{window[name]=function(json){window[name]=json}}return"script"}},script:{request:function(){var opts=this.options;var node=this.transport=DOC.createElement("script");if(opts.charset){node.charset=opts.charset}var self=this;node.onerror=node[useOnload?"onload":"onreadystatechange"]=function(){self.respond()};node.src=opts.url;head.insertBefore(node,head.firstChild)},respond:function(event,forceAbort){var node=this.transport;if(!node){return}if(forceAbort&&this.timeoutID){clearTimeout(this.timeoutID);delete this.timeoutID}var execute=/loaded|complete|undefined/i.test(node.readyState);if(forceAbort||execute){node.onerror=node.onload=node.onreadystatechange=null;var parent=node.parentNode;if(parent){parent.removeChild(node)}if(!forceAbort){var args;if(this.jsonpCallback){var jsonpCallback=this.jsonpCallback.startsWith("avalon.")?avalon[this.jsonpCallback.replace(/avalon\./,"")]:window[this.jsonpCallback];args=typeof jsonpCallback==="function"?[500,"error"]:[200,"success"]}else{args=[200,"success"]}this.dispatch.apply(this,args)}}}},upload:{preproccess:function(){var opts=this.options,formdata;if(typeof opts.form.append==="function"){formdata=opts.form;opts.contentType=""}else{formdata=new FormData(opts.form)}avalon.each(opts.data,function(key,val){formdata.append(key,val)});this.formdata=formdata}}};avalon.mix(transports.jsonp,transports.script);avalon.mix(transports.upload,transports.xhr);if(!window.FormData){var str='Function BinaryToArray(binary)\r\n                 Dim oDic\r\n                 Set oDic = CreateObject("scripting.dictionary")\r\n                 length = LenB(binary) - 1\r\n                 For i = 1 To length\r\n                     oDic.add i, AscB(MidB(binary, i, 1))\r\n                 Next\r\n                 BinaryToArray = oDic.Items\r\n              End Function';execScript(str,"VBScript");avalon.fixAjax=function(){avalon.ajaxConverters.arraybuffer=function(){var body=this.tranport&&this.tranport.responseBody;if(body){return new VBArray(BinaryToArray(body)).toArray()}};function createIframe(ID){var iframe=avalon.parseHTML("<iframe  id='"+ID+"' name='"+ID+"' style='position:absolute;left:-9999px;top:-9999px;'/>").firstChild;return(DOC.body||DOC.documentElement).insertBefore(iframe,null)}function addDataToForm(form,data){var ret=[],d,isArray,vs,i,e;for(d in data){isArray=Array.isArray(data[d]);vs=isArray?data[d]:[data[d]];for(i=0;i<vs.length;i++){e=DOC.createElement("input");e.type="hidden";e.name=d;e.value=vs[i];form.appendChild(e);ret.push(e)}}return ret}avalon.ajaxTransports.upload={request:function(){var self=this;var opts=this.options;var ID="iframe-upload-"+this.uniqueID;var form=opts.form;var iframe=this.transport=createIframe(ID);var backups={target:form.target||"",action:form.action||"",enctype:form.enctype,method:form.method};var fields=opts.data?addDataToForm(form,opts.data):[];form.target=ID;form.action=opts.url;form.method="POST";form.enctype="multipart/form-data";this.uploadcallback=avalon.bind(iframe,"load",function(event){self.respond(event)});form.submit();for(var i in backups){form[i]=backups[i]}fields.forEach(function(input){form.removeChild(input)})},respond:function(event){var node=this.transport,child;if(!node){return}if(event&&event.type==="load"){var doc=node.contentWindow.document;this.responseXML=doc;if(doc.body){this.responseText=doc.body.innerHTML;if((child=doc.body.firstChild)&&child.nodeName.toUpperCase()==="PRE"&&child.firstChild){this.responseText=child.firstChild.nodeValue}}this.dispatch(200,"success")}this.uploadcallback=avalon.unbind(node,"load",this.uploadcallback);delete this.uploadcallback;setTimeout(function(){node.parentNode.removeChild(node)})}};delete avalon.fixAjax};avalon.fixAjax()}return avalon})(avalon);(function(m){if(!(window.MozCSSKeyframeRule||window.WebKitCSSKeyframeRule||window.CSSKeyframeRule)){m.error("当前浏览器不支持CSS3 keyframe动画")}var e=m.fn.animate=function(M,N){var P=new C(this[0]);if(typeof M==="number"){P.duration=M;if(arguments.length===1){P.playState=false}}else{if(typeof M==="object"){for(var L in M){var O=m.cssName(L)||L;if(L!==O){M[O]=M[L];delete M[L]}}P.props=M}}K.apply(P,arguments);u(P);return this};var I=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i;var h=/Android 2\.3\.[3-7]/i;var g=(function(){var O=m.cssName("transform");var M=document.createElement("div");var L=document.documentElement;M.style[O]="translate3d(1px,1px,1px)";L.insertBefore(M,null);var N=getComputedStyle(M).getPropertyValue(O);L.removeChild(M);return null!=N&&N.length&&"none"!=N})();function K(L){for(var N=1;N<arguments.length;N++){p(this,arguments[N])}this.queue=!!(this.queue==null||this.queue);this.easing=l[this.easing]?this.easing:"ease";this.count=(this.count===Infinity||J(this.count))?this.count:1;this.gotoEnd=false;var O=this.duration;this.duration=typeof O==="number"?O:/^\d+ms$/.test(O)?parseFloat(O):/^\d+s$/.test(O)?parseFloat(O)*1000:400;var M=navigator.userAgent;this.use3D=g&&this.use3D&&(I.test(M)?!h(M):1)}function J(L){return +L===L>>>0}function p(O,N,L){if(!L){switch(m.type(N)){case"object":for(var M in N){p(O,N[M],M)}break;case"number":O.duration=N;break;case"string":if(N==="slow"){O.duration=600}else{if(N==="fast"){O.duration=200}else{O.easing=N}}break;case"function":O.bind("complete",N);break}}else{if(typeof N==="function"){O.bind(L,N)}else{O[L]=N}}}var l={linear:[0.25,0.25,0.75,0.75],ease:[0.25,0.1,0.25,1],swing:[0.25,0.1,0.25,1],easeIn:[0.42,0,1,1],easeOut:[0,0,0.58,1],easeInOut:[0.42,0,0.58,1],easeInQuad:[0.55,0.085,0.68,0.53],easeInCubic:[0.55,0.055,0.675,0.19],easeInQuart:[0.895,0.03,0.685,0.22],easeInQuint:[0.755,0.05,0.855,0.06],easeInSine:[0.47,0,0.745,0.715],easeInExpo:[0.95,0.05,0.795,0.035],easeInCirc:[0.6,0.04,0.98,0.335],easeInBack:[0.6,-0.28,0.735,0.045],easeOutQuad:[0.25,0.46,0.45,0.94],easeOutCubic:[0.215,0.61,0.355,1],easeOutQuart:[0.165,0.84,0.44,1],easeOutQuint:[0.23,1,0.32,1],easeOutSine:[0.39,0.575,0.565,1],easeOutExpo:[0.19,1,0.22,1],easeOutCirc:[0.075,0.82,0.165,1],easeOutBack:[0.175,0.885,0.32,1.275],easeInOutQuad:[0.455,0.03,0.515,0.955],easeInOutCubic:[0.645,0.045,0.355,1],easeInOutQuart:[0.77,0,0.175,1],easeInOutQuint:[0.86,0,0.07,1],easeInOutSine:[0.445,0.05,0.55,0.95],easeInOutExpo:[1,0,0,1],easeInOutCirc:[0.785,0.135,0.15,0.86],easeInOutBack:[0.68,-0.55,0.265,1.55],custom:[0,0.35,0.5,1.3],random:[Math.random().toFixed(3),Math.random().toFixed(3),Math.random().toFixed(3),Math.random().toFixed(3)]};m.easing={};m.each(l,function(L,M){m.easing[L]=q([M[0],M[1]],[M[2],M[3]])});function q(R,P){var L=[null,null],S=[null,null],Q=[null,null],N=function(T,U){Q[U]=3*R[U],S[U]=3*(P[U]-R[U])-Q[U],L[U]=1-Q[U]-S[U];return T*(Q[U]+T*(S[U]+T*L[U]))},O=function(T){return Q[0]+T*(2*S[0]+3*L[0]*T)},M=function(V){var T=V,U=0,W;while(++U<14){W=N(T,0)-V;if(Math.abs(W)<0.001){break}T-=W/O(T)}return T};return function(T){return N(M(T),1)}}function E(){if(window.requestAnimationFrame){return{start:requestAnimationFrame.bind(window),stop:cancelAnimationFrame.bind(window)}}else{if(window.mozCancelRequestAnimationFrame&&window.mozCancelAnimationFrame){return{start:mozRequestAnimationFrame.bind(window),stop:mozCancelAnimationFrame.bind(window)}}else{if(window.webkitRequestAnimationFrame&&webkitRequestAnimationFrame(String)){return{start:webkitRequestAnimationFrame.bind(window),stop:(window.webkitCancelAnimationFrame||window.webkitCancelRequestAnimationFrame).bind(window)}}else{}}}}var o=new E();var n=null;var B=m.timeline=[];function u(P){if(P.queue){var L=1;for(var M=B.length,N;N=B[--M];){if(N.elem===P.elem){N.troops.push(P);L=0;break}}if(L){B.unshift(P)}}else{B.push(P)}if(!n){n=o.start(function O(){if(n){j();o.start(O)}})}}function j(){var L=B.length;while(--L>=0){if(!B[L].paused){if(!(B[L].elem&&i(B[L],L))){B.splice(L,1)}}}if(B.length===0){o.stop(n);n=null}}function i(S,P){var O=+new Date;if(!S.startTime){if(S.playState){S.fire("before");S.build();S.addKeyframe()}S.startTime=O}else{var N=(O-S.startTime)/S.duration;var L=S.gotoEnd||N>=1;if(S.playState){for(var R=0,Q;Q=S.tweens[R++];){if(Q.scrollXY){Q.run(N,L)}}S.fire("step")}if(L||S.count===0){S.count--;S.fire("after");if(S.count<=0){S.removeKeyframe();S.fire("complete");var M=S.troops.shift();if(!M){return false}B[P]=M;M.troops=S.troops}else{S.startTime=S.gotoEnd=false;S.frameName=("fx"+Math.random()).replace(/0\./,"");if(S.revert){S.revertTweens()}else{S.createTweens(m.isHidden(S.elem))}}}}return true}var v=document.documentElement;m.isHidden=function(L){return L.sourceIndex===0||m.css(L,"display")==="none"||!m.contains(v,L)};function A(L){return L.replace(/([a-z\d])(A-Z)/g,"$1-$2").replace(/\_/g,"-").replace(/^[A-Z]/,function(M){return"-"+M.toLowerCase()})}var w=m.cssName("animation").replace(/animation/i,"");var y=w===""?"":"-"+w.toLowerCase()+"-";var G=/\\?\#{([^{}]+)\}/gm;function r(M,L){var N=m.slice(arguments,1);return M.replace(G,function(Q,P){if(Q.charAt(0)==="\\"){return Q.slice(1)}var O=Number(P);if(O>=0){return N[O]}if(L&&L[P]!==void 0){return L[P]}return""})}var f;function z(U,V,P){if(!f){f=document.getElementById("avalonStyle")}var M=P?"name":"selectorText";var L=P?"@keyframes ":"cssRule ";var R=f.sheet;var N=R.cssRules;var T=-1;for(var Q=0,O=N.length;Q<O;Q++){var S=N[Q];if(S[M]===U){T=Q;break}}V.call(R,T,O)}function s(L,M){z(L,function(O,N){if(O===-1){this.insertRule(M,N)}},true)}function k(L){z(L,function(M){if(M!==-1){this.deleteRule(M)}},true)}function C(L){this.$events={};this.elem=L;this.troops=[];this.tweens=[];this.orig={};this.props={};this.count=1;this.frameName=("fx"+Math.random()).replace(/0\./,"");this.playState=true}var H=m.cssName("animation-play-state");C.prototype={constructor:C,bind:function(O,N,M){var L=this.$events[O]||(this.$events[O]=[]);var P=M?"unshift":"push";L[P](N)},fire:function(P){var L=Array.prototype.slice.call(arguments,1);var N=this.$events[P]||[];for(var M=0,O;O=N[M++];){O.call(this.elem,L)}},play:function(L){this.elem.style[H]=L?"paused":"running";this.paused=L?Date.now():null},build:function(){var R=this;var P=R.elem;var O=R.props;var N=P.style;var M=m.isHidden(P);if("height" in O||"width" in O){R.overflow=[N.overflow,N.overflowX,N.overflowY]}var Q=N.display||m.css(P,"display");var L=P.getAttribute("olddisplay");if(!L){if(Q==="none"){N.display="";Q=m.css(P,"display");if(Q==="none"){Q=m.parseDisplay(P.nodeName)}}P.setAttribute("olddisplay",Q)}else{if(Q!=="none"){P.setAttribute("olddisplay",Q)}else{Q=L}}N.display=Q;if(Q==="inline"&&m.css(P,"float")==="none"){N.display="inline-block"}this.createTweens(M);if(R.overflow){N.overflow="hidden";R.bind("after",function(){N.overflow=R.overflow[0];N.overflowX=R.overflow[1];N.overflowY=R.overflow[2]})}R.bind("after",function(){if(R.showState==="hide"){this.style.display="none";this.dataShow={};for(var T in R.orig){this.dataShow[T]=R.orig[T];m.css(this,T,R.orig[T])}}else{var U=this;var V=U.style;var S=window.getComputedStyle(U,null);R.tweens.forEach(function(X){var W=X.name;if(W in V){V[W]=S[W]}})}});this.build=m.noop},removeKeyframe:function(){k(this.frameName)},addKeyframe:function(){var S=[];var R=[];var L=false;var Q=this;this.tweens.forEach(function(T){if(Q.use3D&&/transform/i.test(T.name)&&!L){L=true}S.push(A(T.name)+":"+T.start+T.unit);R.push(A(T.name)+":"+T.end+T.unit)});var M="#{frameName} #{duration}ms cubic-bezier(#{easing}) 0s 1 normal #{model} running";var P=r(c,{frameName:this.frameName,prefix:y,from:S.join(";"),to:R.join(";")});s(this.frameName,P);var O=r(M,{frameName:this.frameName,duration:this.duration,model:"forwards",easing:l[this.easing]});var N=this.elem;N.style[m.cssName("animation")]=O;if(this.use3D&&!L){N.style[m.cssName("transform")]="translate3d(0,0,0)"}},createTweens:function(L){this.tweens=[];for(var M in this.props){x(this,M,this.props[M],L)}},revertTweens:function(){for(var N=0,M;M=this.tweens[N++];){var O=M.start;var L=M.end;M.start=L;M.end=O;this.props[M.name]=(M.unit?M.start+M.unit:M.start)}}};var F=new RegExp("^(?:([+-])=|)("+(/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/).source+")([a-z%]*)$","i");var c="@#{prefix}keyframes #{frameName}{ 0%{ #{from} } 100%{  #{to} }  }";function x(M,L,S,N){var O=M.elem;var V=O.dataShow||{};var U=new d(L,M);var T=V[L]||U.cur();var R;if(/color$/i.test(L)){parts=[T,S]}else{parts=F.exec(T);var Q=parts&&parts[3]||(m.cssNumber[L]?"":"px");if(S==="toggle"){S=N?"show":"hide"}if(S==="show"){M.showState="show";m.css(O,L,0);parts=[0,parseFloat(T)]}else{if(S==="hide"){M.showState="hide";M.orig[L]=T;parts=[parseFloat(T),0];S=0}else{parts=F.exec(S);if(parts){parts[2]=parseFloat(parts[2]);if(parts[3]&&parts[3]!==Q){var P=O.cloneNode(true);P.style.visibility="hidden";P.style.position="absolute";O.parentNode.appendChild(P);m.css(P,L,parts[2]+(parts[3]?parts[3]:0));parts[2]=parseFloat(m.css(P,L));O.parentNode.removeChild(P)}R=parts[2];T=parseFloat(T);if(parts[1]){R=T+(parts[1]+1)*parts[2]}parts=[T,R]}}}}T=parts[0];R=parts[1];if(T+""!==R+""){U.start=T;U.end=R;U.unit=Q||"";M.tweens.push(U)}else{delete M.props[L]}}function d(M,L){this.elem=L.elem;this.name=M;this.easing=m.easing[L.easing];this.scrollXY=M==="scrollTop"||M==="scrollLeft"}d.prototype={constructor:d,cur:function(){var L=d.propHooks[this.name];return L&&L.get?L.get(this):d.propHooks._default.get(this)},run:function(M,L){this.update(M,L);var N=d.propHooks[this.name];if(N&&N.set){N.set(this)}else{d.propHooks._default.set(this)}},update:function(M,L){this.now=(L?this.end:this.start+this.easing(M)*(this.end-this.start))}};d.propHooks={_default:{get:function(L){var M=m.css(L.elem,L.name);return !M||M==="auto"?0:M},set:function(L){m.css(L.elem,L.name,L.now+L.unit)}}};["scrollTop","scrollLeft"].forEach(function(L){d.propHooks[L]={get:function(M){return M.elem[M.name]},set:function(M){M.elem[M.name]=M.now}}});m.fn.mix({delay:function(L){return this.animate(L)},pause:function(){var N=this[0];for(var L=0,M;M=B[L];L++){if(M.elem===N){M.play("stop")}}return this},resume:function(){var L=new Date;var N=this[0];for(var M=0,O;O=B[M];M++){if(O.elem===N){O.startTime+=(L-O.paused);O.play()}}return this},stop:function(L,O){L=L?"1":"";O=O?"1":"0";var M=parseInt(L+O,2);var P=this[0];for(var N=0,Q;Q=B[N];N++){if(Q.elem===P){Q.gotoEnd=true;Q.count=0;switch(M){case 0:Q.playState=Q.revert=false;break;case 1:Q.revert=false;break;case 2:delete Q.elem;break;case 3:Q.troops.forEach(function(R){R.gotoEnd=true});break}}}return this}});var D=[["height","marginTop","marginBottom","borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],["width","marginLeft","marginRight","borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],["opacity"]];function t(M,L){var N={};D.concat.apply([],D.slice(0,L)).forEach(function(O){N[O]=M});return N}var b={slideDown:t("show",1),slideUp:t("hide",1),slideToggle:t("toggle",1),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}};m.each(b,function(M,L){m.fn[M]=function(){var N=[].concat.apply([L],arguments);return this.animate.apply(this,N)}});String("toggle,show,hide").replace(m.rword,function(L){m.fn[L]=function(){var M=[].concat.apply([t(L,3)],arguments);return this.animate.apply(this,M)}});return m})(avalon);
